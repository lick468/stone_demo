<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<!-- 全局js -->
    <script src="/js/jquery.min.js?v=2.1.4" type="text/javascript"></script>
    <script src="/js/jquery-1.12.4.js"  type="text/javascript"></script>
    <script src="/js/bootstrap.min.js?v=3.3.6" type="text/javascript"></script>
    <script src="/js/jquery.dataTables.min.js"  type="text/javascript"></script>
    <script src="/js/jquery-editable-select.min.js" type="text/javascript"></script>   
    <script src="/js/dataTables.bootstrap.min.js"  type="text/javascript"></script>
    <script src="/js/plugins/layer/laydate/laydate.js" type="text/javascript"></script>
     <script src="/js/movingwindow.js" type="text/javascript"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>石头管理</title>
<link href="/css/bootstrap.min.css?v=3.3.6" rel="stylesheet"/>
<link href="/css/bootstrap-theme.min.css?v=3.3.7" rel="stylesheet"/>
<link href="/css/jquery-editable-select.min.css?v=2.2.4" rel="stylesheet"/>


<style type="text/css">
.input-group.col-lg-4 {
	float: left;
	margin-left: 10px;
	margin-top: 10px;
}

.col-md-2.column.input-group {
	float: left;
	margin-left: 20px;
	margin-top: 20px;
}

.col-md-4.column.input-group {
	float: left;
	margin-left: 20px;
	margin-top: 20px;
}

.input-group.col-lg-2 {
	float: left;
	margin-left: 10px;
	margin-top: 10px;
}

.input-group.col-lg-2.ajax {
	float: left;
	margin-left: 100px;
	margin-top: 10px;
}

.input-group-addon {
	background-color: #4169E1;
	width: 100px;
	text-align: center;
	color: white;
}

.white_content {
	display: none;
	position: absolute;
	top: 10%;
	width: 70%;
	height: 100%;
	border: 16px solid lightblue;
	background-color: white;
	z-index: 1002;
	overflow: auto;
}

.com1 {
	height: 60px;
	border-radius: 20px 20px 0px 0px;
	background-color: cornflowerblue;
	text-align: center;
	font-family: "宋体";
	font-size: 40px;
}

.box {
	margin-left: 1000px;
	position: relative;
	width: 200px;
	height: 100px;
	line-height: 50px;
	background-color: #DB524C;
	color: #fff;
	text-align: center;
	z-index: 100;
}

.input {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0;
	right: 0;
	opacity: 0;
	z-index: -1;
}

.head {
	background-color: #C0C0C0;
	text-align: center;
	height: 50px;
	
	font-size: 40px;
	font-style: oblique;
}

.show {
	z-index: -1;
}
.btn{
color:white;
}


table tr:nth-child(2n+3){  
    background-color:#E5E5E5;  
}  
table tr:nth-child(2n+2){  
    background-color:#D0D0D0;  
}

.btn_edit{
  display: inline-block;
  padding: 9px 20px;
  font-size: 14px;
  cursor: pointer;
  text-align: center;   
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: #4CAF50;
  border: none;
  border-radius: 15px;
  box-shadow: 0 3px #999;

}
.btn_edit:hover {background-color: #3e8e41}

.btn_edit:active {
  background-color: #3e8e41;
  box-shadow: 0 1px #666;
  transform: translateY(4px);
}

.btn_delete{
  display: inline-block;
  padding: 9px 20px;
  font-size: 14px;
  cursor: pointer;
  text-align: center;   
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: #FF0000;
  border: none;
  border-radius: 15px;
  box-shadow: 0 3px #999;

}
.btn_delete:hover {background-color: #B00000}

.btn_delete:active {
  background-color: #B00000;
  box-shadow: 0 1px #666;
  transform: translateY(4px);
}

.btn_search{
  display: inline-block;
  padding: 9px 20px;
  font-size: 14px;
  cursor: pointer;
  text-align: center;   
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: #3385FF;
  border: none;
  border-radius: 15px;
  box-shadow: 0 3px #999;
}
.btn_search:hover {background-color: #3366FF}

.btn_search:active {
  background-color: #3366FF;
  box-shadow: 0 1px #666;
  transform: translateY(4px);
}
.btn_title_1{
  display: inline-block;
  padding: 9px 20px;
  font-size: 14px;
  width:40px;
  height:40px;
  cursor: pointer;
  text-align: center;   
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: #3385FF;
  border: none;
  border-radius: 15px;
  box-shadow: 0 3px #999;
}

.btn_submit{
  display: inline-block;
  height:60px;
  width:150px;
  padding: 1px 2px;
  font-size:24px;
  cursor: pointer;
  text-align: center;   
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: #008287;
  border: none;
  border-radius: 4px;
  box-shadow: 0 1px #999;
}
.btn_download{
    display: inline-block;
    height:30px;
    width:150px;
    font-size:24px;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    color: #fff;
    background-color:#3385FF;
    border: none;
    border-radius: 4px;
    box-shadow: 0 1px #999;
}

.btn_back{
  display: inline-block;
  padding: 9px 20px;
  font-size: 14px;
  cursor: pointer;
  text-align: center;   
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: #505050;
  border: none;
  border-radius: 15px;
  box-shadow: 0 1px #999;

}
.btn_stone{
width: 300px;
height: 100px;
font-size: 50px;
color: white;
background-color: #700000;
border-radius:15px;
}
.file-wrap {  
    position: relative;  
    width: 300px;  
    height: 100px;  
    border-radius: 15px;  
    background-color: #700000;  
    background-repeat: no-repeat;  
    background-position: 0 0;  
    background-attachment: scroll;  
      
    text-align: center;  
    font-size: 50px;  
    color: white;  
    cursor: pointer;  
    overflow: hidden;  
    float: left;  
    margin-right: 20px;  
    z-index: 1;  
}  
  
    .file-wrap input {  
        position: absolute;  
        width: 300px;  
        height: 100px;  
        font-size: 0;  
        opacity: 0;  
        -moz-opacity: 0;  
        left: 0px;  
        top: 0px;  
        cursor: pointer;  
        z-index: 2;  
    }  

.space{
height: 20px;
}
table tr:hover{
	background-color: grey;
}
.col-md-4{
text-align: center;
font-size: 26px;
color: #7A998A;
}
.col-md-2{
padding-top:5px;
text-align: center;
font-size: 20px;
color: white;
}
.as{
color: red;
}

.hide_column{
   display: none;
}
th{
text-align: center;
}
td{
text-align: center;
}
.btn_reset{
    display: inline-block;
    padding: 9px 20px;
    font-size: 14px;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    outline: none;
    color: #fff;
    background-color: #FFCC00;
    border: none;
    border-radius: 15px;
    box-shadow: 0 3px #FFCC33;

}
.btn_reset:hover {background-color: #FF9900}

.btn_reset:active {
    background-color: #FF6633;
    box-shadow: 0 1px #FFCC33;
    transform: translateY(4px);
}
</style>
</head>
<body>

	<!-- 图片位置 -->
	<div>
		<img class="img-responsive img-thumbnail center-block"
			src="/img/diamond.png" width="100%" />
	</div>
	<!-- 黑色框位置 -->
	<div class="row">
	<div  class="col-md-4" style="background-color: black;text-align:center;height:40px;">
		YOURDIAM珠宝
	</div>
	<div class="col-md-4" style="background-color: black;text-align:left;height:40px;">
		 <font size="4" color="white">在线人数：<span id="count" class ="as"  ></span></font>	 	
	</div>
	<div class="col-md-2"  style="background-color: black;text-align:center;height:40px;">
		 我的账号：石头管理员	 	
	</div>
	<div class="col-md-2" style="background-color: black;text-align:center;height:40px;">
		 <a href="/logout" >退出</a> 
	</div>
	</div>
	<!-- 功能选择位置 -->
	<div style="height: 26px;"></div>
	<div class="btn-toolbar">
		<div class="btn-group btn-group-lg ">
			<button type="button" id="btn_ruku" style="background-color: blue;"
				class="btn ">入库</button>
			<button type="button" id="btn_search" style="background-color: #34495E;"
				class="btn ">查询与统计</button>
			<button type="button" id="btn_manage" style="background-color: #34495E;"
				class="btn ">石库管理</button>
			<button type="button" id="btn_xuanshi"
				style="background-color: #34495E;" class="btn ">选石</button>
			<button type="button" id="btn_songshishichuku"
				style="background-color: #34495E;" class="btn ">加工订单出库</button>
			<button type="button" id="btn_tbackStone"
				style="background-color: #34495E;" class="btn ">退石记录</button>

		</div>
	</div>

	<!-- 入库 -->
	<div id="ruku" class="container"
		style="width: 100%; border: 1px solid #00BFFF;">
		<div style="padding: 10px 10px 10px;" class="col-lg-12">
			<div style="text-align: center;"></div>
	
		<div class="input-group col-lg-2 "  >
		<button  class="btn_stone" onclick="insertStoneCopy();">添加石头</button>
		</div>
		<div class="input-group col-lg-2 "  >
		
		</div>
		<form  name="myExcel"  role="form" action="/b/exceltosql" method="post" enctype="multipart/form-data" >
		<div class="input-group col-lg-2" >
			<input type="hidden" id="level" name="level" th:value="${session.level}">	
		    <div class="file-wrap">  
			    <input type="file" id="StoneFile" name="StoneFile" accept=".xls"/>  
			  	Excel导入 
			</div>		
   		</div>	   	
  	
  		<div class="input-group col-lg-2 ">
				<span class="input-group-addon come" style="height: 100px;">来源</span> 
				<select id="ddddstone_channelNo" class="form-control" name="stone_channelNo" style="height:100px;font-size: 50px;">
					<option name="stone_channelNoRadio" id="goushi"value="购石">购石</option>
					<option name="stone_channelNoRadio" id="tuishi"value="退石">退石</option>
					<option name="stone_channelNoRadio" id="chaishi"value="拆石">拆石</option>
				</select>
		</div>
 		<div class="input-group col-lg-2">
  			<input type="submit" class="btn_stone" value="确认提交" id="btn_excel" onclick="return checkStoneUpload()" />
  		</div>
	  </form>
		<div id="stoneallList" style="border: 1px solid pink; margin-top: 120px;">
			<div class="head"> 石头库临时表
			<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石数</span>
					<input type="text" class="form-control"  id="mainNumberCopy" disabled="disabled" th:value="${mainNumberCopy}" />
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石重</span>
					<input type="text" class="form-control"  id="mainWeightCopy" disabled="disabled" th:value="${#numbers.formatDecimal(mainWeightCopy,0,3)}" />
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石数</span>
					<input type="text" class="form-control"  id="subNumberCopy" disabled="disabled" th:value="${subNumberCopy}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石重</span>
					<input type="text" class="form-control"  id="subWeightCopy" disabled="disabled" th:value="${#numbers.formatDecimal(subWeightCopy,0,3)}"/>
				</div> 
			</div>    
			<table id="listAllStoneCopy" class="table table-striped table-bordered"
				style="width: 100%;">
				<thead>
					<tr>
						
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</thead>
				
				<tfoot>
					<tr>
						
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>
			<legend style="text-align: center;">
				<button class="btn_stone" onclick="return  checkCopy();" style="width:45%;">提交入库</button>
				<button class="btn_stone" onclick="return all_delete();" style="width:45%;">放弃入库</button>
			</legend>
   </div>
		</div>
		</div>
		<br>

	
	<!-- 查询与统计 -->
	<div id="searchAndsum" style="display: none; border: 1px solid #00BFFF; height: 90px;">
		<div style="height: 10px;"></div>
		<ul id="myTab" class="nav nav-tabs">
			<li class="active">
				<a href="#myList" data-toggle="tab">供应商库存</a>
			</li>
			<li>
				<a href="#newList" data-toggle="tab">石库库存</a>
			</li>
		</ul>
		<div id="myTabContent" class="tab-content">
			<div class="tab-pane fade in active" id="myList">
			</div>
			<div class="tab-pane fade " id="newList">

			</div>
		</div>

		<input id="result" type="text" style="display: none;" value="all">
		<div class="row" style="margin-left: 10px;">
			<div class="input-group col-lg-2 ">
				<span class="input-group-addon">查询属性</span>
                <select id="queryTypeStone" class="form-control">
					<option value="stone_purchdate">日期查询</option>
					<option value="stone_mainStoneNo">主石编</option>
					<option value="stone_substoNo">副石编</option>
					<option value="stone_loosdofty">裸石厂</option>
					<option value="stone_supplier">供应商</option>
				</select>
			</div>
			<div id="div_date" class="input-group col-lg-2">
				<input id="purchDateStart" class="form-control layer-date" name="stone_purchdate" placeholder="YYYY-MM-DD "
						onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
			</div>
			<div id="div_date2" class="input-group col-lg-2">
				<input id="purchDateEnd" class="form-control layer-date" name="stone_purchdate" placeholder="YYYY-MM-DD "
						onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
			</div>

			<div id="div_mainNo" class="input-group col-lg-2" style="display: none;">
				<input id="mainNo" class="form-control" name="stone_mainStoneNo" placeholder="格式：AS123">
			</div>

			<div id="div_subNo" class="input-group col-lg-2" style="display: none;">
				<input id="substoNo" class="form-control" name="stone_substoNo" placeholder="格式：12345">
			</div>
			<div id="div_loosdofty" class="input-group col-lg-2"
				style="display: none;">
				<select id="loosdofty" class="form-control"
					name="stone_loosdofty">
					<option th:each="loosdofty : ${loosdoftyList}"
						th:value="${loosdofty.stone_loosdofty}"
						th:text="${loosdofty.stone_loosdofty}" ></option>
				</select>
			</div>
			<div id="div_supplier" class="input-group col-lg-2"
				style="display: none;">
				<select id="supplier" class="form-control"
					name="stone_loosdofty">
					<option value="none"></option>
					<option th:each="supplier : ${supplierList}"
						th:value="${supplier.supplier_name}"
						th:text="${supplier.supplier_name}" ></option>
				</select>
			</div>
			<div class="input-group col-lg-2">
				<button class="btn_search" id="ajaxSearch1"
					onclick="ajaxSearchStone();">查找</button>
			</div>
			<div id="secondSearch" style="display: none;" class="input-group col-lg-2">
				<button class="btn_search" id="ajaxSearch"
					onclick="ajaxSearchStoneSecond();">在结果中检索</button>
			</div>
			<form action="/b/downloadExcelAllSupplier" method="post" style="margin-left: 1000px;">
					<input type="hidden"  value="" name="result" id="contextSupplier"/>
					<input type="submit" class = "btn_search" value="供应商库存汇总">
			</form>
		</div>


		<div id="stoneallListaaa" style="margin-top: 60px;display: none;">
			<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石数</span>
					<input type="text" class="form-control"   disabled="disabled" th:value="${mainNumber}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石重</span>
					<input type="text" class="form-control"   disabled="disabled" th:value="${#numbers.formatDecimal(mainWeight,0,3)}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石数</span>
					<input type="text" class="form-control"   disabled="disabled" th:value="${subNumber}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石重</span>
					<input type="text" class="form-control"   disabled="disabled" th:value="${#numbers.formatDecimal(subWeight,0,3)}"/>
				</div>
				<form action="/b/downloadExcel" method="post" style="margin-left: 1000px;">
					<input type="hidden"  value="all" name="result" id="resultAll"/>
					<input type="submit" class = "btn_search" value="Excel下载">
				</form> 
			

			<table id="listAllStone" class="table table-striped table-bordered"
				style="width: 100%;">
				<thead>
					<tr>
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</thead>
				
				<tfoot>
					<tr>
						
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>
		</div>
		<!-- 查询显示表格 -->
		<div id="stoneSearchList" style="margin-top: 60px; display: none;">
			<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石数</span>
					<input type="text" class="form-control"  id="mainNumberSearch" disabled="disabled" />
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石重</span>
					<input type="text" class="form-control"  id="mainWeightSearch" disabled="disabled" />
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石数</span>
					<input type="text" class="form-control"  id="subNumberSearch" disabled="disabled" />
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石重</span>
					<input type="text" class="form-control"  id="subWeightSearch" disabled="disabled" />
				</div>
			<form action="/b/downloadExcel" method="post" style="margin-left: 1000px;">
					<input type="hidden"  value="" name="result" id="resultSearch"/>
					<input type="submit" class = "btn_search" value="Excel下载">
			</form>
			<div>
				
				<input id="aaasearchtype" type="text" style="display: none;">
				<input id="aaasearchstart" type="text" style="display: none;">
				<input id="aaasearchend" type="text" style="display: none;">
				<input id="aaasearchmainno" type="text" style="display: none;">
				<input id="aaasearchsubno" type="text" style="display: none;">
				<input id="aaasearchloosdofty" type="text" style="display: none;">
			</div>

			<table id="stonelistBySearch"
				class="table table-striped table-bordered table-hover " style="width: 100%;">
				<thead>
					<tr>
					    <th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
						
					</tr>
				</thead>
				<tbody>
				</tbody>
				<tfoot>
					<tr>
					     <th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>
		</div>
		
		<div id="showstonebysupplier" style="margin-top: 60px;">
			  <div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石数</span>
					<input type="text" class="form-control"  id="mainNumberSupplier" disabled="disabled" th:value="${session.supplierStoneMainNumber}" />
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石重</span>
					<input type="text" class="form-control"  id="mainWeightSupplier" disabled="disabled" th:value="${#numbers.formatDecimal(session.supplierStoneMainWeight,0,3)}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石数</span>
					<input type="text" class="form-control"  id="subNumberSupplier" disabled="disabled" th:value="${session.supplierStoneSubNumber}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石重</span>
					<input type="text" class="form-control"  id="subWeightSupplier" disabled="disabled" th:value="${#numbers.formatDecimal(session.supplierStoneSubWeight,0,3)}"/>
				</div>                               
			<form action="/b/downloadExcelSupplier" method="post" style="margin-left: 1000px;">
					<input type="hidden"  value="" name="result" id="contextSupplierForOne"/>
					<input type="submit" class = "btn_search" value="Excel下载">
			</form>
			<table id="stonelistBySupplier"
				class="table table-striped table-bordered table-hover " style="width: 100%;border:2px solid black;">
				<thead>
					<tr>
						<th>序号</th>
						<th>采购日期</th>
						<th>供应商</th>
						<th>订单号</th>
						<th>主石编</th>
						<th>主石数</th>
						<th>主石</th>
						<th>副石编</th>
						<th>副石数</th>
						<th>副石</th>
						<th>送货人</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
				<tfoot>
					 <tr>
						<th>序号</th>
						<th>采购日期</th>
						<th>供应商</th>
						<th>订单号</th>
						<th>主石编</th>
						<th>主石数</th>
						<th>主石</th>
						<th>副石编</th>
						<th>副石数</th>
						<th>副石</th>
						<th>送货人</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
	<!-- 石库管理 -->
	<div id="manage"
		style="display: none; border: 0px solid #00BFFF; height: 90px;">
		<div style="height: 10px;"></div>
		<div class="input-group col-lg-2 "  >
				<span class="input-group-addon"  >石编</span>
				<input type="text" class="form-control"  placeholder="请输入石编"  id="manage_stoneNo"/>
			</div>
			<div class="input-group col-lg-2"> 
				<button  class="btn_search" onclick="manageStoneNoSearch();" >	查找</button>		
			</div>
			<form action="/b/downloadAllStoneExcel" method="post" style="margin-left: 1000px;">
					<input type="submit" class = "btn_search" value="Excel下载">
			</form> 
			<div class="space"></div>
		<div id="stoneShowList" style="border: 0px solid; margin-top: 10px;">
			<div class="head">数据显示列表
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石数</span>
					<input type="text" class="form-control"  id="mainNumber" disabled="disabled" th:value="${mainNumber}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >主石重</span>
					<input type="text" class="form-control"  id="mainWeight" disabled="disabled" th:value="${#numbers.formatDecimal(mainWeight,0,3)}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石数</span>
					<input type="text" class="form-control"  id="subNumber" disabled="disabled" th:value="${subNumber}"/>
				</div>
				<div class="input-group col-lg-2 "  >
					<span class="input-group-addon"   >副石重</span>
					<input type="text" class="form-control"  id="subWeight" disabled="disabled" th:value="${#numbers.formatDecimal(subWeight,1,3)}"/>
				</div>
			</div>
			
			
			<div id="manage_all">
			<table id="exampletableshowList"
				class="table table-striped table-bordered" style="width: 100%;">
				<thead>
					<tr>
						
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</thead>
				
				<tfoot>
					<tr>
						
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>
		</div>
		<div id="manage_search" style="display: none;">
		 
			<table id="manage_search_table"
				class="table table-striped table-bordered" style="width: 100%;">
				<thead>
					<tr>
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</thead>
				
				<tfoot>
					<tr>
						
						<th>序号</th>
						<th>采购日期</th>
						<th>裸石厂</th>
						<th>主石名</th>
						<th>主石编</th>
						<th>主石</th>
						<th>主石数</th>
						<th>副石编</th>
						<th>副石名</th>
						<th>副石</th>
						<th>副石数</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>备注</th>
						<th>来源</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>
		</div>
		</div>

		<div id="stoneEdit" class="contentDiv"
			style="border: 3px solid; margin-top: 100px; display: none;">
			<div class="container" style="text-align: center;">
				<h1>石头管理</h1>
			</div>

			<form method="post" action="/b/updateStone" class="form-horizontal">

				<input type="hidden" id="estone_ID" name="stone_ID" />
				<div class="container">
					<div class="row ">
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">日期</span> <input type="text"
								class="form-control" id="estone_purchdate"
								name="stone_purchdate" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">序号</span> <input type="text"
								class="form-control" id="estone_seqno" name="stone_seqno" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">裸石厂</span> <input type="text"
								class="form-control" id="estone_loosdofty"
								name="stone_loosdofty" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">来源</span> <input type="text"
								class="form-control" id="estone_channelNo"
								name="stone_channelNo" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">主石名</span> <input type="text"
								class="form-control" id="estone_mainName" name="stone_mainName" />
						</div>

					</div>
					<div class="row ">

						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">主石编</span> <input type="text"
								class="form-control" id="estone_mainStoneNo"
								name="stone_mainStoneNo" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">规格</span> <input type="text"
								class="form-control" id="estone_spec" name="stone_spec" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">主石</span> <input type="text"
								class="form-control" id="estone_mainNumber"
								name="stone_mainNumber" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">主石数</span> <input type="text"
								class="form-control" id="estone_mainWeight"
								name="stone_mainWeight" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">主石价</span> <input type="text"
								class="form-control" id="estone_mainPrperct"
								name="stone_mainPrperct" />
						</div>
					</div>
					<div class="row ">

						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">主石额</span> <input type="text"
								class="form-control" id="estone_mainPramt"
								name="stone_mainPramt" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">副石编</span> <input type="text"
								class="form-control" id="estone_substoNo" name="stone_substoNo" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">副石名</span> <input type="text"
								class="form-control" id="estone_substoName"
								name="stone_substoName" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">副石数</span> <input type="text"
								class="form-control" id="estone_substoNumber"
								name="stone_substoNumber" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">副石重</span> <input type="text"
								class="form-control" id="estone_substoWgt"
								name="stone_substoWgt" />
						</div>

					</div>
					<div class="row ">
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">副石价</span> <input type="text"
								class="form-control" id="estone_substoPrperct"
								name="stone_substoPrperct" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">副石额</span> <input type="text"
								class="form-control" id="estone_substoPramt"
								name="stone_substoPramt" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">形状</span> <input type="text"
								class="form-control" id="estone_shape" name="stone_shape" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">颜色</span> <input type="text"
								class="form-control" id="estone_color" name="stone_color" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">净度</span> <input type="text"
								class="form-control" id="estone_clarity" name="stone_clarity" />
						</div>

					</div>
					<div class="row ">
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">颜色2</span> <input type="text"
								class="form-control" id="estone_color2" name="stone_color2" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">净度2</span> <input type="text"
								class="form-control" id="estone_clarity2" name="stone_clarity2" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">切工</span> <input type="text"
								class="form-control" id="estone_cut" name="stone_cut" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">荧光</span> <input type="text"
								class="form-control" id="estone_fluorescence"
								name="stone_fluorescence" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">对称性</span> <input type="text"
								class="form-control" id="estone_symmetry" name="stone_symmetry" />
						</div>

					</div>
					<div class="row ">
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">抛光</span> <input type="text"
								class="form-control" id="estone_polish" name="stone_polish" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">直径</span> <input type="text"
								class="form-control" id="estone_diameter" value="" name="stone_diameter" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">高度</span> <input type="text"
								class="form-control" id="estone_height" value="" name="stone_height" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">台宽比</span> <input type="text"
								class="form-control" id="estone_tablewidth" value=""
								name="stone_tablewidth" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">经手人</span> <input type="text"
								class="form-control" id="estone_preparer" name="stone_preparer" />
						</div>

					</div>
					<div class="row ">
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">接货人</span> <input type="text"
								class="form-control" id="estone_porter" name="stone_porter" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">备注</span> <input type="text"
								class="form-control" id="estone_comments" name="stone_comments" />
						</div>
						<div class="col-md-2 column input-group">
							<span class="input-group-addon ">GIA证书号</span> <input type="text"
								class="form-control" id="estone_GIA" name="stone_GIA" />
						</div>
						
					</div>
				</div>

				<div style="height: 40px;"></div>

				<div class=" container">
					<div class="col-sm-offset-2 col-sm-10">
						<input class="btn_submit " type="submit" value="提交" />&nbsp;&nbsp; <input
							class="btn_submit" type="button" value="返回" onclick="editToList();" />
					</div>
				</div>
			</form>
		</div>
	</div>
	<!-- 选石 -->
	<div id="xuanshi" class="container"
		style="width: 100%; border: 2px solid #00BFFF; display: none;">

		<div
			style="padding: 10px 10px 10px; width: 50%; float: left; border-right: solid 1px gray;">
			
				<div class="head">石头库存表</div>
				
				<div class="input-group col-lg-4 "  >
					<span class="input-group-addon"  >时间</span>
					<input
						id="selectTime" class="form-control layer-date" type="text"
						 placeholder="YYYY-MM-DD "
						onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
				</div>
				<div class="input-group col-lg-4"> 
					<input type="button"  class="btn_search" onclick="xuanshiForShowByTime();" value="查找">	
				</div>
				
				<div class="input-group col-lg-2"> 
					<input type="hidden" id="xuanshiListStone" value="all">
					<input type="button" class="btn_search" onclick="pushAllStone();" value="一键选石">	
				</div>
				<hr>
				<div class="input-group col-lg-4 "  >
					<span class="input-group-addon"  >石编</span>
					<input id="selectNo" class="form-control" placeholder="石编">
				</div>
				<div class="input-group col-lg-4"> 
					<input type="button"  class="btn_search" onclick="xuanshiForShowByNo();" value="查找">	
				</div>
				
				<div class="input-group col-lg-2"> 
					<input type="button" class="btn_search" onclick="pushAllStone();" value="一键选石">	
				</div>
				<br>
				<br>
				<br>
				<div id="xuanshiTableAll">
				<table id="examplexuanshi" class="table table-striped table-bordered table-hover " style="width: 100%">
					<thead>
						<tr>
							<th>入库日期</th>
							<th>主石编</th>
							<th>主石</th>
							<th>主石数</th>
							<th>副石编</th>
							<th>副石</th>
							<th>副石数</th>
							<th>操作</th>

						</tr>
					</thead>
					<tfoot>
						<tr>
							
							<th>入库日期</th>
							<th>主石编</th>
							<th>主石</th>
							<th>主石数</th>
							<th>副石编</th>
							<th>副石</th>
							<th>副石数</th>
							<th>操作</th>
						</tr>
					</tfoot>
				</table>
				</div>
				<div id="xuanshiTableForSearch" style="display: none;">
				   <input type="button"  onclick="backkucun();" value="返回库存表">
				<table id="xuanshiForSearch" class="table table-striped table-bordered table-hover " style="width: 100%">
					<thead>
						<tr>
							<th>入库日期</th>
							<th>主石编</th>
							<th>主石</th>
							<th>主石数</th>
							<th>副石编</th>
							<th>副石</th>
							<th>副石数</th>
							<th>操作</th>

						</tr>
					</thead>
					<tfoot>
						<tr>
							
							<th>入库日期</th>
							<th>主石编</th>
							<th>主石</th>
							<th>主石数</th>
							<th>副石编</th>
							<th>副石</th>
							<th>副石数</th>
							<th>操作</th>
						</tr>
					</tfoot>
				</table>
				</div>
		</div>
		<div style="padding: 10px 10px 10px; width: 50%; float: left;border-left: solid 1px gray;">
			<form action="/b/insertOrder" class="bs-example bs-example-form" role="form" id="formOrder" method="post">
				<div class="head">
				<div class="input-group col-lg-4 "  >
					<span class="input-group-addon"   >石数</span>
					<input type="text" class="form-control"  id="stoneNumberOfSend" disabled="disabled"  />
				</div>
				<div class="input-group col-lg-4 "  >
					<span class="input-group-addon"   >石重</span>
					<input type="text" class="form-control"  id="stoneWeightOfSend" disabled="disabled" />
				</div>
				
				加工石头表
	
				</div>
				<br>
				<div class="input-group col-lg-12 ">
					<span class="input-group-addon">批次</span> <input type="text"
						name="procord_batch" id="procord_batch" placeholder="批次"
						class="form-control ">
				</div>
				<br>
				<table id="SignFrame" class="table table-striped table-hover"
					style="width: 100%;">
					<thead>
						<tr>
						    <th class="hide_column">ID</th>
							<th>序号</th>
							<th>石编</th>
							<th>石数</th>
							<th>石重</th>
							<th>备注</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>

					</tbody>
				</table>
				<br>
				<div class="input-group col-lg-12 ">
					<span class="input-group-addon">出货日期</span> <input
						id="procord_delydate" class="form-control layer-date" type="text"
						name="procord_delydate" placeholder="YYYY-MM-DD "
						onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
				</div>
				<br>
				<div class="input-group col-lg-12 ">
					<span class="input-group-addon">选择供应商</span> <select
						id="supplierChoice" class="form-control" name="stone_supplierName">
						<option th:each="supplier : ${supplierList}"
							th:value="${supplier.supplier_name}"
							th:text="${supplier.supplier_name}" ></option>
					</select>
				</div>
				<br>
				<div class="input-group col-lg-12 ">
					<span class="input-group-addon">送货人</span> <input type="text"
						name="procord_delyman" id="procord_delyman" placeholder="送货人"
						class="form-control ">
				</div>
				<br>
				<div class="input-group col-lg-12 ">
					<span class="input-group-addon">经手人</span> <input type="text"
						name="procord_preparer" id="procord_preparer" placeholder="经手人"
						class="form-control ">
				</div>
				<br>
				<div class="input-group col-lg-12 ">
					<span class="input-group-addon">接货人</span> <input type="text"
						name="procord_porter" id="procord_porter" placeholder="接货人"
						class="form-control ">
				</div>
				<input type="hidden" value="" name="table_body" id="table_body">
				<input type="button" class="btn_submit" name="Submit" value="提交"
					onclick="return insertStone();" /> <input type="button" class="btn_submit"
					name="Submit2" value="清空" onClick="ClearAllSign();" />
			</form>
		</div>

		<div></div>
	</div>
	<!-- 加工订单出库 -->
	<div id="songshichuku" class="container"
		style="width: 100%;  display: none;">
		<div style="height: 10px;"></div>
		<div id="ProcordShowList" style="padding: 10px 10px 10px;">
			<div class="container">
				<div class="row clearfix">
					<div class="col-md-12 column">
						<div class="row clearfix" style="text-align:center;margin-top:10px;">
							<div class="col-md-4 column">
								<div class="input-group">
									<span class="input-group-addon" >批次</span>
									<input type="text" class="form-control" placeholder="请输入批次" id="procordBatch">
								</div>
							</div>
							<div class="col-md-4 column">
								<div class="input-group">
									<span class="input-group-addon" >订单号</span>
									<input type="text" class="form-control" placeholder="请输入订单号" id="procordNo">
								</div>
							</div>
							<div class="col-md-4 column">
								<div class="input-group">
									<span class="input-group-addon" >加工厂</span>
									<input type="text" class="form-control" placeholder="请输入加工厂" id="procordSupplier">
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-12 column">
						<div class="row clearfix" style="text-align:center;margin-top:10px;">
							<div class="col-md-4 column">
								<div class="input-group">
									<span class="input-group-addon" >订单日期</span>
									<input type="date" value="" placeholder="YYYY-MM-DD " class="form-control " id="procordDate">
								</div>
							</div>
							<div class="col-md-4 column">
								<div class="input-group">
									<span class="input-group-addon" >出货日期</span>
									<input type="date" value="" placeholder="YYYY-MM-DD " class="form-control " id="procordDelyDate">
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-12 column">
						<div class="row clearfix" style="text-align:center;margin-top:10px;">
							<div class="col-md-12 column" style="text-align:center;">
								<button type="button" class="btn btn_search" onclick="searchProcord()">查询</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								<button type="button" class="btn btn_reset" onclick="resetProcord()">重置</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <button type="button" class="btn btn_search" onclick="downloadProcord()">Excel下载</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="head">加工订单表<small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="btn_download" href="/b/downloadProcord">Excel下载</a> </small>
			</div>
			<br>
			<table id="exampleorderout"
				class="table table-striped table-bordered table-hover " style="width: 100%;">
				<thead>
					<tr>
                        <tr>
                            <th colspan="13" style="text-align:center;"></th>
                        </tr>
                        <tr>
                            <th colspan="13" style="text-align:center;font-size: 30px;">加工订单数据</th>
                        </tr>
						<th>ID</th>
						<th>订单号</th>
						<th>加工厂</th>
						<th>批次</th>
						<th>订单日期</th>
						<th>出货日期</th>
						<th>石数</th>
						<th>石重</th>
						<th>货款金额</th>
						<th>送货人</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>操作</th>
					</tr>
				</thead>
				
				<tfoot>
					<tr>
						<th>ID</th>
						<th>订单号</th>
						<th>加工厂</th>
						<th>批次</th>
						<th>订单日期</th>
						<th>出货日期</th>
						<th>石数</th>
						<th>石重</th>
						<th>货款金额</th>
						<th>送货人</th>
						<th>经手人</th>
						<th>接货人</th>
						<th>操作</th>
					</tr>
				</tfoot>
			</table>

		</div>
		<div id="ProcordEdit" class="contentDiv"
			style=" margin-top: 100px; display: none;">
			<div class="head" style="text-align: center;">
				<h1>订单管理</h1>
			</div>

			<form method="post" action="/b/updateProcord" class="form-horizontal" onsubmit="return checkUpdateProcord();">

				<div class="container">
					<div class="row ">
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">订单号</span> <input type="text"
								class="form-control" id="eprocord_no" name="procord_no"
								readonly="readonly" />
						</div>
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">加工厂</span> <input type="text"
								class="form-control" id="eprocord_supplier"
								name="procord_supplier" />
						</div>
					</div>
					<div class="row ">
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">批次</span> <input type="text"
								class="form-control" id="eprocord_batch" name="procord_batch" />
						</div>
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">订单日期</span> <input type="text"
							  onclick="laydate({istime: true, format: 'YYYY-MM-DD '})"
								class="form-control" id="eprocord_date" name="procord_date"  />
						</div>
					</div>
					<div class="row ">
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">出货日期</span> <input type="text"
							  onclick="laydate({istime: true, format: 'YYYY-MM-DD '})"
								class="form-control" id="eprocord_delydate"
								name="procord_delydate" />
						</div>
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">总金额</span> <input type="text"
								class="form-control" id="eprocord_pay" name="procord_pay"
								readonly="readonly" />
						</div>
					</div>
					<div class="row ">

						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">送货人</span> <input type="text"
								class="form-control" id="eprocord_delyman"
								name="procord_delyman" />
						</div>
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">经手人</span> <input type="text"
								class="form-control" id="eprocord_preparer"
								name="procord_preparer" />
						</div>
					</div>
					<div class="row ">
						<div class="col-md-4 column input-group">
							<span class="input-group-addon ">接货人</span> <input type="text"
								class="form-control" id="eprocord_porter" name="procord_porter" />
						</div>
					</div>

				</div>

				<div style="height: 40px;"></div>

				<div class=" container">
					<div class="col-sm-offset-2 col-sm-10">
						<input class="btn_submit " type="submit" value="确认修改" />&nbsp;&nbsp; 
						<input class="btn_submit" type="button" value="返回" onclick="editPToListP();" />
					</div>
				</div>
			</form>
		</div>
	</div>
	<!-- 退石记录 -->
	<div id="tbackStone" style="display: none; border: 0px solid #00BFFF; height: 90px;">
		<div style="height: 10px;"></div>
		<div class="row" style="margin-left: 10px;">
			<div class="input-group col-lg-2 ">
				<span class="input-group-addon">查询属性</span> 
				<select id="queryTypetbackStone" class="form-control">

					<option value="tback_time">日期查询</option>
					<option value="tback_no">石编</option>
				</select>
			</div>
			<div id="div_tdate" class="input-group col-lg-2">
				<input id="tback_date_start" class="form-control layer-date"  placeholder="YYYY-MM-DD "
						onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
			</div>
			<div id="div_tdate2" class="input-group col-lg-2">
				<input id="tback_date_end" class="form-control layer-date"  placeholder="YYYY-MM-DD "
						onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
			</div>
			<div id="div_tStoneNo" class="input-group col-lg-2" style="display: none;">
				<input id="tbackStoneNo" class="form-control" name="tbackStone_stoneNo" placeholder="请输入石编">
			</div>
			<div class="input-group col-lg-2">
				<button class="btn_search"  onclick="tbackStoneSearch();">查找</button>
			</div>
			<form action="/b/downloadBackExcel" method="post" style="margin-left: 1000px;" onsubmit="return checkTable();">
					<input type="hidden" id="flag_back" value="nothing">
					<input type="submit" class = "btn_search" value="Excel下载">
			</form> 
		</div>
		

		<div id="tbackStoneShowList" style="border: 0px solid; margin-top: 10px;">
			<div class="head">数据显示列表</div>
			<div class="space"></div>
			<table id="tbackStoneshowListShow"
				class="table table-striped table-bordered" style="width: 100%;">
				<thead>
					<tr>
						<th>序号</th>
						<th>退石日期</th>
						<th>石编</th>
						<th>内容</th>
					</tr>
				</thead>
				<tfoot>
					<tr>
						<th>序号</th>
						<th>退石日期</th>
						<th>石编</th>
						<th>内容</th>
					</tr>
				</tfoot>
			</table>
		</div>

	</div>

	<div id="mydiv" class="white_content">
		<div style="text-align: right; cursor: default; height: 40px;">
			<span style="font-size: 16px;" onclick="CloseDiv('mydiv')">关闭</span>
		</div>
		<div class="com1">石头详情</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">序 号</span> <input id="astone_seqno"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">采购日期</span> <input
				id="astone_purchdate" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">裸石厂</span> <input
				id="astone_loosdofty" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石名</span> <input
				id="astone_mainName" type="text" class="form-control" readonly>
		</div>

		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石编</span> <input
				id="astone_mainStoneNo" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">规格</span> <input id="astone_spec"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石数</span> <input
				id="astone_mainNumber" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石</span> <input
				id="astone_mainWeight" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石价</span> <input
				id="astone_mainPrperct" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石额</span> <input
				id="astone_mainPramt" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石编</span> <input
				id="astone_substoNo" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石名</span> <input
				id="astone_substoName" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石</span> <input
				id="astone_substoWgt" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石数</span> <input
				id="astone_substoNumber" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石价</span> <input
				id="astone_substoPrperct" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石额</span> <input
				id="astone_substoPramt" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">形状</span> <input id="astone_shape"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">颜色</span> <input id="astone_color"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">净度</span> <input
				id="astone_clarity" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">颜色2</span> <input
				id="astone_color2" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">净度2</span> <input
				id="astone_clarity2" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">切工</span> <input id="astone_cut"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">荧光</span> <input
				id="astone_fluorescence" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">对称性</span> <input
				id="astone_symmetry" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">抛光</span> <input id="astone_polish"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">直径</span> <input
				id="astone_diameter" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">高度</span> <input id="astone_height"
				type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">台宽比</span> <input
				id="astone_tablewidth" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">经手人</span> <input
				id="astone_preparer" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">接货人</span> <input
				id="astone_porter" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">备注</span> <input
				id="astone_comments" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">GIA证书号</span> <input
				id="astone_GIA" type="text" class="form-control" readonly>
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">来源</span> <input
				id="astone_channelNo" type="text" class="form-control" readonly>
		</div>
		
		<div>
			<button class="btn_submit container" onclick="CloseDiv('mydiv')"
				style="width: 100%;">退出</button>
		</div>
	</div>
	<!-- 临时库石头编辑页面 -->
	<div id="mydiv_edit" class="white_content">
		<div style="text-align: right; cursor: default; height: 40px;">
			<span style="font-size: 16px;" onclick="CloseDiv_edit('mydiv_edit')">关闭</span>
		</div>
		<div class="com1">石头详情</div>
		<form action="/b/updateStoneCopy" method="post">
		<input  type="hidden" name="stone_ID" id="eastone_ID">
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">序 号</span> <input id="eastone_seqno"
				type="text" class="form-control" name="stone_seqno">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">采购日期</span> <input
				id="eastone_purchdate" type="text" 
				onclick="laydate({istime: true, format: 'YYYY-MM-DD '})" class="form-control" name="stone_purchdate">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">裸石厂</span> <input
				id="eastone_loosdofty" type="text" class="form-control" name="stone_loosdofty">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石名</span> <input
				id="eastone_mainName" type="text" class="form-control" name="stone_mainName">
		</div>

		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石编</span> <input
				id="eastone_mainStoneNo" type="text" class="form-control" name="stone_mainStoneNo">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">规格</span>
			<input id="eastone_spec" type="text" class="form-control" name="stone_spec" >
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石数</span> <input
				id="eastone_mainNumber" type="text" class="form-control" name="stone_mainNumber">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石</span> <input
				id="eastone_mainWeight" type="text" class="form-control" name="stone_mainWeight">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石价</span> <input
				id="eastone_mainPrperct" type="text" class="form-control" name="stone_mainPrperct">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">主石额</span>
			<input id="eastone_mainPramt" type="text" class="form-control" name="stone_mainPramt">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石编</span> <input
				id="eastone_substoNo" type="text" class="form-control" name="stone_substoNo">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石名</span> <input
				id="eastone_substoName" type="text" class="form-control" name="stone_substoName">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石</span> <input
				id="eastone_substoWgt" type="text" class="form-control" name="stone_substoWgt">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石数</span> <input
				id="eastone_substoNumber" type="text" class="form-control" name="stone_substoNumber">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石价</span> <input
				id="eastone_substoPrperct" type="text" class="form-control" name="stone_substoPrperct" >
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">副石额</span> <input
				id="eastone_substoPramt" type="text" class="form-control" name="stone_substoPramt">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">形状</span>
			<input id="eastone_shape" type="text" class="form-control" name="stone_shape">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">颜色</span>
			<input id="eastone_color" type="text" class="form-control" name="stone_color">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">净度</span> <input
				id="eastone_clarity" type="text" class="form-control" name="stone_clarity">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">颜色2</span> <input
				id="eastone_color2" type="text" class="form-control" name="stone_color2">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">净度2</span> <input
				id="eastone_clarity2" type="text" class="form-control" name="stone_clarity2">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">切工</span> 
			<input id="eastone_cut" type="text" class="form-control" name="stone_cut">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">荧光</span> <input
				id="eastone_fluorescence" type="text" class="form-control" name="stone_fluorescence">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">对称性</span> <input
				id="eastone_symmetry" type="text" class="form-control" name="stone_symmetry" >
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">抛光</span> 
			<input id="eastone_polish" type="text" class="form-control" name="stone_polish">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">直径</span> <input
				id="eastone_diameter" type="text" class="form-control" name="stone_diameter">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">高度</span> 
			<input id="eastone_height" type="text" class="form-control" name="stone_height">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">台宽比</span> <input
				id="eastone_tablewidth" type="text" class="form-control" name="stone_tablewidth" >
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">经手人</span> <input
				id="eastone_preparer" type="text" class="form-control" name="stone_preparer">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">接货人</span> <input
				id="eastone_porter" type="text" class="form-control" name="stone_porter">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">备注</span> <input
				id="eastone_comments" type="text" class="form-control" name="stone_comments">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">GIA证书号</span> <input
				id="eastone_GIA" type="text" class="form-control" name="stone_GIA">
		</div>
		<div class="input-group col-lg-4 ajax">
			<span class="input-group-addon">来源</span> <input
				id="eastone_channelNo" type="text" class="form-control" name="stone_channelNo">
		</div>
		
		<div>
		<input type="submit" class="btn_submit " style="width: 40%;" value="编辑">

		<button class="btn_submit " onclick="CloseDiv_edit('mydiv_edit')"
				style="width: 40%;">退出</button>
		</div>
		</form>
		
		
	</div>
	
<!-- 添加石头 -->
<div id="addStone" style="display:none;"> 
<form   class="bs-example bs-example-form" role="form"method="post" action="/b/insertstone">
				<div id="all" class="row"
					style="padding: 5px 5px 5px 5px; float: left; width: 80%;">
					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">采购日期</span> <input
							id="stone_purchdate" class="form-control layer-date" type="text"
							name="stone_purchdate" placeholder="YYYY-MM-DD"
							onclick="laydate({istime: true, format: 'YYYY-MM-DD '})">
					</div>
					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">序号</span> <input
							id="stone_seqno" type="text" class="form-control"
							name="stone_seqno" onkeypress="return handleEnter(this, event)">
					</div>
					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">裸石厂</span> <input
							id="stone_loosdofty" type="text" class="form-control"
							name="stone_loosdofty" onkeypress="return handleEnter(this, event)">
					</div>
					<div id="stone_mainStoneNo" class="input-group col-lg-4 ">
						<span class="input-group-addon">主石编</span> <input type="text"
							class="form-control" name="stone_mainStoneNo" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_mainName" class="input-group col-lg-4 ">
						<span class="input-group-addon">主石名</span> <input type="text"
							class="form-control" name="stone_mainName" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_mainWeight" class="input-group col-lg-4 ">
						<span class="input-group-addon">主石重量</span> <input type="text"
							class="form-control" name="stone_mainWeight" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_spec" class="input-group col-lg-4 ">
						<span class="input-group-addon">规格</span> <input type="text"
							class="form-control" name="stone_spec" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_mainNumber" class="input-group col-lg-4 ">
						<span class="input-group-addon">主石石数</span> <input type="text"
							class="form-control" name="stone_mainNumber" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_mainPrperct" class="input-group col-lg-4 ">
						<span class="input-group-addon">主石石价</span> <input type="text"
							class="form-control" name="stone_mainPrperct" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_mainPramt" class="input-group col-lg-4 ">
						<span class="input-group-addon">主石总额</span> <input type="text"
							class="form-control" name="stone_mainPramt" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_substoNo" class="input-group col-lg-4 ">
						<span class="input-group-addon">副石编</span> <input type="text"
							class="form-control" name="stone_substoNo" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_substoName" class="input-group col-lg-4 ">
						<span class="input-group-addon">副石名</span> <input type="text"
							class="form-control" name="stone_substoName" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_substoWgt" class="input-group col-lg-4 ">
						<span class="input-group-addon">副石</span> <input type="text"
							class="form-control" name="stone_substoWgt" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_substoNumber" class="input-group col-lg-4 ">
						<span class="input-group-addon">副石数</span> <input type="text"
							class="form-control" name="stone_substoNumber" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_substoPrperct" class="input-group col-lg-4 ">
						<span class="input-group-addon">副石价</span> <input type="text"
							class="form-control" name="stone_substoPrperct" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_substoPramt" class="input-group col-lg-4 ">
						<span class="input-group-addon">副石额</span> <input type="text"
							class="form-control" name="stone_substoPramt" onkeypress="return handleEnter(this, event)">
					</div>

					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">经手人</span> <input
							id="stone_preparer" type="text" class="form-control"
							name="stone_preparer" onkeypress="return handleEnter(this, event)">
					</div>

					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">接货人</span> <input
							id="stone_porter" type="text" class="form-control"
							name="stone_porter" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_shape" class="input-group col-lg-4 ">
						<span class="input-group-addon">形状</span> <input type="text"
							class="form-control" name="stone_shape" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_color" class="input-group col-lg-4 ">
						<span class="input-group-addon">颜色</span> <input type="text"
							class="form-control" name="stone_color" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_clarity" class="input-group col-lg-4 ">
						<span class="input-group-addon">净度</span> <input type="text"
							class="form-control" name="stone_clarity" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_color2" class="input-group col-lg-4 ">
						<span class="input-group-addon">颜色2</span> <input type="text"
							class="form-control" name="stone_color2" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_clarity2" class="input-group col-lg-4 ">
						<span class="input-group-addon">净度2</span> <input type="text"
							class="form-control" name="stone_clarity2" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_cut" class="input-group col-lg-4 ">
						<span class="input-group-addon">切工</span> <input type="text"
							class="form-control" name="stone_cut" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_fluorescence" class="input-group col-lg-4 ">
						<span class="input-group-addon">荧光</span> <input type="text"
							class="form-control" name="stone_fluorescence" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_symmetry" class="input-group col-lg-4 ">
						<span class="input-group-addon">对称性</span> <input type="text"
							class="form-control" name="stone_symmetry" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_polish" class="input-group col-lg-4 ">
						<span class="input-group-addon">抛光</span> <input type="text"
							class="form-control" name="stone_polish" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_diameter" class="input-group col-lg-4 ">
						<span class="input-group-addon">直径</span> <input type="text"
							class="form-control" name="stone_diameter" onkeypress="return handleEnter(this, event)">
					</div>

					<div id="stone_height" class="input-group col-lg-4 ">
						<span class="input-group-addon">高度</span> <input type="text"
							class="form-control" name="stone_height" onkeypress="return handleEnter(this, event)">
					</div>

					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">台宽比</span> <input
							id="stone_tablewidth" type="text" class="form-control"
							name="stone_tablewidth" onkeypress="return handleEnter(this, event)">
					</div>
					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">GIA证书号</span> <input
							id="stone_GIA" type="text" class="form-control"
							name="stone_GIA" onkeypress="return handleEnter(this, event)">
					</div>
					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">备注</span> <input
							id="stone_comments" type="text" class="form-control"
							name="stone_comments" onkeypress="return handleEnter(this, event)">
					</div>

					<div class="input-group col-lg-4 ">
						<span class="input-group-addon">来源</span> <select
							id="stone_channelNo" class="form-control" name="stone_channelNo">
							<option value="购石">购石</option>
							<option value="退石">退石</option>
							<option value="拆石">拆石</option>
						</select>
					</div>
				</div>
				<br>
				<div class="btn-toolbar" id="uploadBox">

					<input class="btn_submit" id="uploadInput" value="确认添加" type="submit" onchange="upload()" />
					 <input class="btn_submit" type="button" value="返回" onclick="showStoneCopy();"/>
				</div>
				<br>

			</form>
</div>
<div id="mes" th:text="${message}" class="hide_column">  </div>
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">重复的石编</h4>
			</div>
			<div class="modal-body" style="height: 400px;overflow-y: auto">
				<table class="table" id="repeatStoneNo">
					<thead>
					<tr>
						<th>石编</th>
					</tr>
					</thead>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>
<div id="show" style="display:none;background-color: red;width: 100px;height: 100px;">  </div>	
	<script type="text/javascript" th:inline="javascript">
	var result = [[${result}]];
    var stoneNoList = [[${stoneNoList}]];
    if(stoneNoList != null) {
        $('#myModal').modal('show')
        for(var i=0;i<stoneNoList.length;i++) {
            $("#repeatStoneNo").append("<tr><td>"+ stoneNoList[i]+"</td></tr>");
        }
    }
	var s = document.getElementById("mes").innerHTML;
	if(s=="") {
		//alert("mes的值是"+s);
	}
	if(s=="updateProcord") {
		 $("#ruku").hide();
		 $("#searchAndsum").hide();
		 $("#manage").hide();
		 $("#xuanshi").hide();
		 $("#songshichuku").show(); 
		 $("#addStone").hide();
		 $("#ProcordShowList").show();
		 $("#ProcordEdit").hide();
		
		 $("#btn_ruku").css("background","#34495E");
		 $("#btn_manage").css("background","#34495E");
		 $("#btn_search").css("background","#34495E");
		 $("#btn_xuanshi").css("background","#34495E");
		 $("#btn_songshishichuku").css("background","blue");
		 $("#btn_songshishichuku").css("color","white");
		//alert("mes的值是"+s);
	}
	if(s=="updateStone") {
		$("#ruku").hide();
		 $("#searchAndsum").hide();
		 $("#manage").show();
		 $("#addStone").hide();
		 $("#xuanshi").hide();
		 $("#songshichuku").hide();
		 $("#stoneShowList").show();
		 $("#stoneEdit").hide();
		
		 $("#btn_ruku").css("background","#34495E");
		 $("#btn_manage").css("background","blue");
		 $("#btn_manage").css("color","white");
		 $("#btn_search").css("background","#34495E");
		 $("#btn_xuanshi").css("background","#34495E");
		 $("#btn_songshishichuku").css("background","#34495E");
		//alert("mes的值是"+s);
	}
	if(s=="deleteStone") {
		 $("#ruku").hide();
		 $("#searchAndsum").hide();
		 $("#manage").show();
		 $("#addStone").hide();
		 $("#xuanshi").hide();
		 $("#songshichuku").hide();
		 $("#stoneShowList").show();
		 $("#stoneEdit").hide();
		 $("#tbackStone").hide();
		 
		 $("#btn_ruku").css("background","#34495E");
		 $("#btn_manage").css("background","blue");
		 $("#btn_manage").css("color","white");
		 $("#btn_search").css("background","#34495E");
		 $("#btn_xuanshi").css("background","#34495E");
		 $("#btn_songshishichuku").css("background","#34495E");
		 $("#btn_tbackStone").css("background","#34495E");
		
	}
	if(s=="insertOrder") {
		$("#ruku").hide();
		 $("#searchAndsum").hide();
		 $("#manage").hide();
		 $("#xuanshi").show();
		 $("#addStone").hide();
		 $("#songshichuku").hide();
		 $("#tbackStone").hide();
		 
		 $("#btn_ruku").css("background","#34495E");
		 $("#btn_manage").css("background","#34495E");
		 $("#btn_search").css("background","#34495E");
		 $("#btn_xuanshi").css("background","blue");
		 $("#btn_xuanshi").css("color","white");
		 $("#btn_songshishichuku").css("background","#34495E");
		 $("#btn_tbackStone").css("background","#34495E");
		
	}
	
	
	
	
	//统计在线人数
	$.ajax({
		 url:"/count",
		 type:"post",
		dateType:"json",
		success:function(result) {
			$("#count").text(result);
		}
	});
	
	
	

var i=0;
var ii=0;
var num="";
var numberOfSend=0;
var weightOfSend=0;
function chooseStone(node) {
	var sid = node.value;
	$.ajax({
		 url:"/b/xuanshiForOne",
		 type:"post",
		 data:{
		 		sid:sid,
		 	},
		dateType:"json",
		success:function(result) {
			var stoneList =[];
	 		stoneList = result;
	 		if(stoneList.length>0) {
	 			
				for(var i=0;i<stoneList.length;i++) {
					if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石
						if(num.indexOf(stoneList[i].stone_mainStoneNo)==-1 && stoneList[i].stone_mainStoneNo.toString().length>2) {
							num+=stoneList[i].stone_mainStoneNo+",";
							numberOfSend +=1;
							weightOfSend +=stoneList[i].stone_mainWeight;
							$("#stoneNumberOfSend").val(numberOfSend);
							$("#stoneWeightOfSend").val(weightOfSend.toFixed(3));
							$("#SignFrame").append("<tr id='"+ stoneList[i].stone_mainStoneNo +"' ><td class='hide_column'>"+ stoneList[i].stone_ID +"</td><td>"+ ++ii +"</td><td>"+ stoneList[i].stone_mainStoneNo +"</td><td>"+ stoneList[i].stone_mainNumber +"</td><td>"+ stoneList[i].stone_mainWeight +"</td><td ><input id='content"+stoneList[i].stone_ID+"'  class='form-control' value='' type='text'  /> </td><td><a href='javascript:;'  class='btn_delete' onclick=\"deleteCurrentRow(this)\">删除</a>" +"</td></tr>");
						}
					}else {
						if(num.indexOf(stoneList[i].stone_substoNo)==-1 && stoneList[i].stone_substoNo.toString().length>2) {
							num+=stoneList[i].stone_substoNo+",";
							numberOfSend +=1;
							weightOfSend +=stoneList[i].stone_substoWgt;
							$("#stoneNumberOfSend").val(numberOfSend);
							$("#stoneWeightOfSend").val(weightOfSend.toFixed(3));
							$("#SignFrame").append("<tr id='"+ stoneList[i].stone_substoNo +"' ><td class='hide_column'>"+ stoneList[i].stone_ID +"</td><td>"+ ++ii +"</td><td>"+ stoneList[i].stone_substoNo +"</td><td><input id='sub"+stoneList[i].stone_ID+"' size='6'  class='form-control' value='" + stoneList[i].stone_substoNumber + "' type='text'  /></td><td>"+ stoneList[i].stone_substoWgt +"</td><td ><input id='content"+stoneList[i].stone_ID+"'  class='form-control' value='' type='text'  /> </td><td><a href='javascript:;'  class='btn_delete' onclick=\"deleteCurrentRow(this)\">删除</a>" +"</td></tr>");
						}
					}
				}
			}
		}
	});
	
    
}
function pushAllStone() {
	var type =  document.getElementById("xuanshiListStone").value;
	var selectTime =  document.getElementById("selectTime").value;
	var selectNo =  document.getElementById("selectNo").value;
	$.ajax({
		 url:"/b/xuanshiForAll",
		 type:"post",
		 data:{
		 		type:type,
		 		selectTime:selectTime,
		 		selectNo:selectNo,
		 	},
		dateType:"json",
		success:function(result) {
			var stoneList =[];
	 		stoneList = result;
	 		if(stoneList.length>0) {
				for(var i=0;i<stoneList.length;i++) {
					if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石
						if(num.indexOf(stoneList[i].stone_mainStoneNo)==-1 && stoneList[i].stone_mainStoneNo.toString().length>2) {
							num+=stoneList[i].stone_mainStoneNo+",";
							numberOfSend +=1;
							weightOfSend +=stoneList[i].stone_mainWeight;
							$("#stoneNumberOfSend").val(numberOfSend);
							$("#stoneWeightOfSend").val(weightOfSend.toFixed(3));
							$("#SignFrame").append("<tr id='"+ stoneList[i].stone_mainStoneNo +"' ><td class='hide_column'>"+ stoneList[i].stone_ID +"</td><td>"+ ++ii +"</td><td>"+ stoneList[i].stone_mainStoneNo +"</td><td>"+ stoneList[i].stone_mainNumber +"</td><td>"+ stoneList[i].stone_mainWeight +"</td><td ><input id='content"+stoneList[i].stone_ID+"'  class='form-control' value='' type='text'  /> </td><td><a href='javascript:;'  class='btn_delete' onclick=\"deleteCurrentRow(this)\">删除</a>" +"</td></tr>");
						}
					}else {
						if(num.indexOf(stoneList[i].stone_substoNo)==-1 && stoneList[i].stone_substoNo.toString().length>2) {
							num+=stoneList[i].stone_substoNo+",";
							numberOfSend +=1;
							weightOfSend +=stoneList[i].stone_substoWgt;
							$("#stoneNumberOfSend").val(numberOfSend);
							$("#stoneWeightOfSend").val(weightOfSend.toFixed(3));
							$("#SignFrame").append("<tr id='"+ stoneList[i].stone_substoNo +"' ><td class='hide_column'>"+ stoneList[i].stone_ID +"</td><td>"+ ++ii +"</td><td>"+ stoneList[i].stone_substoNo +"</td><td><input id='sub"+stoneList[i].stone_ID+"' size='6'   class='form-control' value='" + stoneList[i].stone_substoNumber + "' type='text'  /></td><td>"+ stoneList[i].stone_substoWgt +"</td><td ><input id='content"+stoneList[i].stone_ID+"'  class='form-control' value='' type='text'  /> </td><td><a href='javascript:;'  class='btn_delete' onclick=\"deleteCurrentRow(this)\">删除</a>" +"</td></tr>");
						}
					}
				}
			}
		}
	});
}



function showDetails(node) {
	$("#show").show();
}




function deleteStoneCopyByStoneIDAJAX(node) {
	//var tr1 = node.parentNode.parentNode;  
	   // alert(tr1.rowIndex);  
	    //alert(tr1.cells[0].innerText); 
	// var sid = tr1.cells[0].innerText;
	// alert(sid);
	var sid = node.value;
	 $.ajax({
		 url:"/b/deleteStoneCopyByStoneIDAJAX",
		 type:"post",
		 data:{
		 		sid:sid,
		 	},
		dateType:"json",
		success:function(result) {
			//alert("成功删除");
		}
	});
	 location.reload();
}

function showStoneCopy() {
	$("#addStone").hide();
	$("#stoneallList").show();

}
function deleteStoneByStoneIDAJAX() {
	var msg = "您真的确定要删除吗？\n\n请确认！"; 
	 if (confirm(msg)==true){ 
	  return true; 
	 }else{ 
	  return false; 
	 } 
	
}
function backall() {
	$("#manage_all").show();
	$("#manage_search").hide();

}

//石库管理石编查找
function manageStoneNoSearch() {
	var sno = document.getElementById("manage_stoneNo").value;
	$.ajax({
		 url:"/b/manageStoneNoSearch",
		 type:"post",
		 data:{
		 		sno:sno,
		 	},
		dateType:"json",
		success:function(result) {
			var stoneList =[];
			stoneList = result;
			$("#manage_all").hide();
			$("#manage_search").show();
			var tt = $('#manage_search_table').DataTable();
	 		 tt.clear();
	 		$("#manage_search_table tbody").empty();
	 		 var mainNumber = 0;
	 		 var subNumber = 0;
	 		 var mainWeight = 0;
	 		 var subWeight = 0;
	 		for(var i=0;i<stoneList.length;i++) {
	 			var now   = new Date(stoneList[i].stone_purchdate);
	 			 var t = $('#manage_search_table').DataTable();
	 		    if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石
	 		    	mainNumber = mainNumber + 1;
	 		    	mainWeight = mainWeight +stoneList[i].stone_mainWeight;
	 		    	t.row.add( [
		 		    	 stoneList[i].stone_seqno,
		 		    	 format(now),
		 		    	 stoneList[i].stone_loosdofty,
		 		    	 stoneList[i].stone_mainName,
		 		    	 stoneList[i].stone_mainStoneNo,
		 		    	 stoneList[i].stone_mainWeight,
		 		    	 stoneList[i].stone_mainNumber,
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 stoneList[i].stone_preparer,
		 		    	 stoneList[i].stone_porter,
		 		    	 stoneList[i].stone_comments,
		 		    	 stoneList[i].stone_channelNo,
		 		    	 '<form action="/b/deleteStoneByStoneIDAJAX" method="post" onsubmit="return deleteStoneByStoneIDAJAX();"><input type="button" class="btn_edit" id="b3@'+stoneList[i].stone_ID+'" onclick="findStoneByStoneIDAJAXEdit(this);" value="编辑">|  <input type="hidden" value="'+stoneList[i].stone_ID+'" name="delete_ID"><input type="submit" value="退石" class="btn_delete"></form>',  
					      ] ).draw( );
	 		    }
	 		    if(stoneList[i].stone_substoNo.toString().length>2) {
	 		    	subNumber = subNumber + stoneList[i].stone_substoNumber;
	 		    	subWeight = subWeight + stoneList[i].stone_substoWgt;
				 	t.row.add( [
				    	 stoneList[i].stone_seqno,
				    	 format(now),
				    	 stoneList[i].stone_loosdofty,
				    	 "",
				    	 "",
				    	 "",
				    	 "",
				    	 stoneList[i].stone_substoName,
				    	 stoneList[i].stone_substoNo,
				    	 stoneList[i].stone_substoWgt,
				    	 stoneList[i].stone_substoNumber,
				    	 stoneList[i].stone_preparer,
				    	 stoneList[i].stone_porter,
				    	 stoneList[i].stone_comments,
				    	 stoneList[i].stone_channelNo,
				    	 '<form action="/b/deleteStoneByStoneIDAJAX" method="post" onsubmit="return deleteStoneByStoneIDAJAX();"><input type="button" class="btn_edit" id="b3@'+stoneList[i].stone_ID+'" onclick="findStoneByStoneIDAJAXEdit(this);" value="编辑">|  <input type="hidden" value="'+stoneList[i].stone_ID+'" name="delete_ID"><input type="submit" value="退石" class="btn_delete"></form>',  
				        ] ).draw( );
	 		    }
	 		      
	 		}
	 		document.getElementById("subNumber").value=subNumber;
	 		document.getElementById("mainNumber").value=mainNumber;
	 		document.getElementById("subWeight").value=subWeight.toFixed(3);
	 		document.getElementById("mainWeight").value=mainWeight.toFixed(3);
	 		

	 	}
	 });
}
function checkTable() {
	var type = document.getElementById("flag_back").value;
	//alert(type);
	if(type.indexOf("nothing")==-1) {
		return true;
	}else {
		alert("没有数据！");
		return false;
	}
	
}


//退石查找
function tbackStoneSearch() {
	var sno = document.getElementById("tbackStoneNo").value;
	var start = document.getElementById("tback_date_start").value;
	var end = document.getElementById("tback_date_end").value;
	var type = document.getElementById("queryTypetbackStone").value;
	$.ajax({
		 url:"/b/tbackStoneSearch",
		 type:"post",
		 data:{
		 		sno:sno,
		 		type:type,
		 		start:start,
		 		end:end,
		 	},
		dateType:"json",
		success:function(result) {
			var tbackStoneList =[];
	 		tbackStoneList = result;
	 		document.getElementById("flag_back").value="search";
			var tt = $('#tbackStoneshowListShow').DataTable();
	 		 tt.clear();
	 		$("#tbackStoneshowListShow tbody").empty();
			if(tbackStoneList.length>0) {
				for(var i=0;i<tbackStoneList.length;i++) {
		 			var now   = new Date(tbackStoneList[i].tback_time);
		 			var t = $('#tbackStoneshowListShow').DataTable();
		 		    t.row.add( [
		 		    	tbackStoneList[i].tback_ID,
		 		    	format(now),
		 		    	tbackStoneList[i].tback_stoneNo,
			 		    tbackStoneList[i].tback_content,
			 		   ] ).draw( );
			    }
		   }
		}
	 });
}

function backkucun() {
	document.getElementById("xuanshiTableForSearch").style.display="none";
	document.getElementById("xuanshiTableAll").style.display="block";
}
function xuanshiForShowByTime() {//选石
	var selectTime =  document.getElementById("selectTime").value;
	$.ajax({
		 url:"/b/xuanshiForShow",
		 type:"post",
		 data:{
			 selectTime:selectTime,
		 	},
		dateType:"json",
		success:function(result) {
			document.getElementById("xuanshiListStone").value = "time";
			document.getElementById("xuanshiTableForSearch").style.display="block";
			document.getElementById("xuanshiTableAll").style.display="none";
			var stoneList =[];
	 		stoneList = result;
			var tt = $('#xuanshiForSearch').DataTable();
	 		 tt.clear();
	 		$("#xuanshiForSearch tbody").empty();
	 		for(var i=0;i<stoneList.length;i++) {
	 			var now   = new Date(stoneList[i].stone_purchdate);
	 			 var t = $('#xuanshiForSearch').DataTable();
	 		    if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石	 		    	
	 		    	t.row.add( [	    	
		 		    	 format(now),
		 		    	 stoneList[i].stone_mainStoneNo,
		 		    	 stoneList[i].stone_mainWeight,
		 		    	 stoneList[i].stone_mainNumber,
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 "<button  value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button> |<button  value="+stoneList[i].stone_ID+" onclick='chooseStone(this);'>选择</button> "
		 		        ] ).draw( );
	 		    }
	 		    if(stoneList[i].stone_substoNo.toString().length>2) {	
				 	t.row.add( [
				    	 format(now),
				    	 "",
				    	 "",
				    	 "",
				    	 stoneList[i].stone_substoNo,
				    	 stoneList[i].stone_substoWgt,
				      	 stoneList[i].stone_substoNumber,
				      	"<button  value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button> |<button  value="+stoneList[i].stone_ID+" onclick='chooseStone(this);'>选择</button> "
		 		    	 ] ).draw( );
	 		    }
	 		      
	 		}
	 	}
	 });
}
function xuanshiForShowByNo() {//选石
	var selectNo =  document.getElementById("selectNo").value;
	$.ajax({
		 url:"/b/xuanshiForShowForNo",
		 type:"post",
		 data:{
			 selectNo:selectNo,
		 	},
		dateType:"json",
		success:function(result) {
			document.getElementById("xuanshiListStone").value = "no";
			document.getElementById("xuanshiTableForSearch").style.display="block";
			document.getElementById("xuanshiTableAll").style.display="none";
			var stoneList =[];
	 		stoneList = result;
			var tt = $('#xuanshiForSearch').DataTable();
	 		 tt.clear();
	 		$("#xuanshiForSearch tbody").empty();
	 		for(var i=0;i<stoneList.length;i++) {
	 			var now   = new Date(stoneList[i].stone_purchdate);
	 			 var t = $('#xuanshiForSearch').DataTable();
	 		    if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石	 		    	
	 		    	t.row.add( [	    	
		 		    	 format(now),
		 		    	 stoneList[i].stone_mainStoneNo,
		 		    	 stoneList[i].stone_mainWeight,
		 		    	 stoneList[i].stone_mainNumber,
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 "<button  value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button> |<button  value="+stoneList[i].stone_ID+" onclick='chooseStone(this);'>选择</button> "
		 		        ] ).draw( );
	 		    }
	 		    if(stoneList[i].stone_substoNo.toString().length>2) {	
				 	t.row.add( [
				    	 format(now),
				    	 "",
				    	 "",
				    	 "",
				    	 stoneList[i].stone_substoNo,
				    	 stoneList[i].stone_substoWgt,
				      	 stoneList[i].stone_substoNumber,
				      	"<button  value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button> |<button  value="+stoneList[i].stone_ID+" onclick='chooseStone(this);'>选择</button> "
		 		    	 ] ).draw( );
	 		    }
	 		      
	 		}
	 	}
	 });
}

$('#selectNo').on('keypress',function(event){ 
    
    
    if(event.keyCode == 13)      

    {  
    	xuanshiForShowByNo();
    	document.getElementById("xuanshiListStone").value="no";
    	pushAllStone();
    	
    }  

});


function format(Date){  
var Y = Date.getFullYear();  
var M = Date.getMonth() + 1;  
    M = M < 10 ? '0' + M : M;// 不够两位补充0  
var D = Date.getDate();  
    D = D < 10 ? '0' + D : D;  
var H = Date.getHours();  
    H = H < 10 ? '0' + H : H;  
var Mi = Date.getMinutes();  
    Mi = Mi < 10 ? '0' + Mi : Mi;  
var S = Date.getSeconds();  
    S = S < 10 ? '0' + S : S;  
    return Y + '-' + M + '-' + D ;  
} 

function deleteCurrentRow(obj){//删除一行
	var signFrame=document.getElementById("SignFrame");
	var tr=obj.parentNode.parentNode;
	var rowIndex = tr.cells[1].innerText;
	var sweight = tr.cells[4].innerText;
	numberOfSend -=1;
	weightOfSend -=sweight;
	$("#stoneNumberOfSend").val(numberOfSend);
	$("#stoneWeightOfSend").val(weightOfSend.toFixed(3));

	num = num.replace(tr.cells[2].innerText,""); //删除一行时同时删除num里记录的编号
	//删除指定Index的行
	signFrame.deleteRow(rowIndex);
	for(ii=rowIndex;ii<signFrame.rows.length;ii++){
		  signFrame.rows[ii].cells[1].innerHTML = ii.toString();
    }
	ii--;
}	 
function deleteAll() {//删除所有行
	num="";
	ii = 0;
	numberOfSend =0;
	weightOfSend =0;
	$("#stoneNumberOfSend").val(null);
	$("#stoneWeightOfSend").val(null);
	$("#SignFrame  tr:not(:first)").html("");		
} 
function ClearAllSign(){

	 if(confirm('确定要清空所有选石吗？')){
		 $("#SignFrame tbody").empty();
		 ii = 0;
		 num = "";
		numberOfSend = 0;
		weightOfSend = 0;
		$("#stoneNumberOfSend").val(0);
		$("#stoneWeightOfSend").val(0.000);
	 
	}
}

function insertStoneCopy() {
  
    $("#stoneallList").hide();
	$("#addStone").show();
}



function ajaxSearchStone() {
	var type = document.getElementById("queryTypeStone").value;
	var mainNo = document.getElementById("mainNo").value;
	var substoNo = document.getElementById("substoNo").value;
	var purchDateStart = document.getElementById("purchDateStart").value;
	var purchDateEnd = document.getElementById("purchDateEnd").value;
	var loosdofty = document.getElementById("loosdofty").value;
	var supplier = document.getElementById("supplier").value;
	
	//alert(type+"||"+mainNo+"||"+substoNo+"||"+purchDateStart+"||"+purchDateEnd+"||"+loosdofty);
	if(type=="stone_supplier") {
		var datatable = $("#stonelistBySupplier").dataTable();
		if (datatable) {  
		   
		    datatable.fnDestroy();         //销毁datatable
		} 
		initTable();
	
	}else {
	 $.ajax({
		 url:"/b/test",
		 type:"post",
	 	data:{
	 		type:type,
	 		mainNo:mainNo,
	 		substoNo:substoNo,
	 		start:purchDateStart,
	 		end:purchDateEnd,
	 		loosdofty:loosdofty,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		var stoneList =[];
	 		stoneList = result;
	 		document.getElementById("resultSearch").value = "first";
	 		var stoneSearchList = document.getElementById("stoneSearchList");
	 		stoneSearchList.style.display="block";
	 		
	 		var stoneallList = document.getElementById("stoneallListaaa");
	 		stoneallList.style.display="none";
	 		var showstonebysupplier = document.getElementById("showstonebysupplier");
	 		showstonebysupplier.style.display="none";
	 		$("#secondSearch").show();
	 		var tt = $('#stonelistBySearch').DataTable();
	 		 tt.clear();
	 		$("#stonelistBySearch tbody").empty();
	 		 var mainNumber = 0;
	 		 var subNumber = 0;
	 		 var mainWeight = 0;
	 		 var subWeight = 0;
	 		for(var i=0;i<stoneList.length;i++) {
	 			var now   = new Date(stoneList[i].stone_purchdate);
	 			 var t = $('#stonelistBySearch').DataTable();
	 		    if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石
	 		    	mainNumber = mainNumber + 1;
	 		    	mainWeight = mainWeight +stoneList[i].stone_mainWeight;
	 		    	t.row.add( [
		 		    	 
		 		    	 stoneList[i].stone_seqno,
		 		    	 format(now),
		 		    	 stoneList[i].stone_loosdofty,
		 		    	 stoneList[i].stone_mainName,
		 		    	 stoneList[i].stone_mainStoneNo,
		 		    	 stoneList[i].stone_mainWeight,
		 		    	 stoneList[i].stone_mainNumber,
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 stoneList[i].stone_preparer,
		 		    	 stoneList[i].stone_porter,
		 		    	 stoneList[i].stone_comments,
		 		    	 stoneList[i].stone_channelNo,
		 		    	"<button class='btn_edit' value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button>" 
		 		        ] ).draw( );
	 		    }
	 		    if(stoneList[i].stone_substoNo.toString().length>2) {
	 		    	subNumber = subNumber + stoneList[i].stone_substoNumber;
	 		    	subWeight = subWeight + stoneList[i].stone_substoWgt;
				 	t.row.add( [
				    	 
				    	 stoneList[i].stone_seqno,
				    	 format(now),
				    	 stoneList[i].stone_loosdofty,
				    	 "",
				    	 "",
				    	 "",
				    	 "",
				    	 stoneList[i].stone_substoName,
				    	 stoneList[i].stone_substoNo,
				    	 stoneList[i].stone_substoWgt,
				    	 stoneList[i].stone_substoNumber,
				    	 stoneList[i].stone_preparer,
				    	 stoneList[i].stone_porter,
				    	 stoneList[i].stone_comments,
				    	 stoneList[i].stone_channelNo,
				    	 "<button class='btn_edit' value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button>"  
				        ] ).draw( );
	 		    }
	 		      
	 		}
	 		document.getElementById("subNumberSearch").value=subNumber;
	 		document.getElementById("mainNumberSearch").value=mainNumber;
	 		document.getElementById("subWeightSearch").value=subWeight.toFixed(3);
	 		document.getElementById("mainWeightSearch").value=mainWeight.toFixed(3);
	 		

	 	}
	 });
	} 
	 
}

function ajaxSearchStoneSecond() {
	var type = document.getElementById("queryTypeStone").value;
	var mainNo = document.getElementById("mainNo").value;
	var substoNo = document.getElementById("substoNo").value;
	var purchDateStart = document.getElementById("purchDateStart").value;
	var purchDateEnd = document.getElementById("purchDateEnd").value;
	var loosdofty = document.getElementById("loosdofty").value;
	var supplier = document.getElementById("supplier").value;
	
	//alert(type+"||"+mainNo+"||"+substoNo+"||"+purchDateStart+"||"+purchDateEnd+"||"+supplierName);
	
	 $.ajax({
		 url:"/b/second",
		 type:"post",
	 	data:{
	 		type:type,
	 		mainNo:mainNo,
	 		substoNo:substoNo,
	 		start:purchDateStart,
	 		end:purchDateEnd,
	 		loosdofty:loosdofty,
	 		supplier:supplier,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		var stoneList =[];
	 		stoneList = result;
	 		//alert(stoneList);
	 		$("#stoneallListaaa").hide();
	 		$("#stoneSearchList").show();
	 		$("#secondSearch").show();
	 		document.getElementById("resultSearch").value = "second";
	 	    var tt = $('#stonelistBySearch').DataTable();
	 	    tt.clear();
	 	    $("#stonelistBySearch tbody").empty();
	 	     var mainNumber = 0;
	 		 var subNumber = 0;
	 		 var mainWeight = 0;
	 		 var subWeight = 0;
	 		for(var i=0;i<stoneList.length;i++) {
	 			var now   = new Date(stoneList[i].stone_purchdate);
	 			 var t = $('#stonelistBySearch').DataTable();
	 		    if(stoneList[i].stone_mainStoneNo.toString().length>2) {//主石
	 		    	mainNumber = mainNumber + 1;
	 		    	mainWeight = mainWeight +stoneList[i].stone_mainWeight;
	 		    	t.row.add( [
		 		    	
		 		    	 stoneList[i].stone_seqno,
		 		    	 format(now),
		 		    	 stoneList[i].stone_loosdofty,
		 		    	 stoneList[i].stone_mainName,
		 		    	 stoneList[i].stone_mainStoneNo,
		 		    	 stoneList[i].stone_mainWeight,
		 		    	 stoneList[i].stone_mainNumber,
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 "",
		 		    	 stoneList[i].stone_preparer,
		 		    	 stoneList[i].stone_porter,
		 		    	 stoneList[i].stone_comments,
		 		    	 stoneList[i].stone_channelNo,
		 		    	"<button class='btn_edit' value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button>" 
		 		        ] ).draw( );
	 		    }
	 		    if(stoneList[i].stone_substoNo.toString().length>2) {
	 		    	subNumber = subNumber + stoneList[i].stone_substoNumber;
	 		    	subWeight = subWeight + stoneList[i].stone_substoWgt;
				 	t.row.add( [
				    	
				    	 stoneList[i].stone_seqno,
				    	 format(now),
				    	 stoneList[i].stone_loosdofty,
				    	 "",
				    	 "",
				    	 "",
				    	 "",
				    	 stoneList[i].stone_substoName,
				    	 stoneList[i].stone_substoNo,
				    	 stoneList[i].stone_substoWgt,
				    	 stoneList[i].stone_substoNumber,
				    	 stoneList[i].stone_preparer,
				    	 stoneList[i].stone_porter,
				    	 stoneList[i].stone_comments,
				    	 stoneList[i].stone_channelNo,
				    	 "<button class='btn_edit' value="+stoneList[i].stone_ID+" onclick='findStoneByStoneIDAJAXShow(this);'>查看详情</button>"  
				        ] ).draw( );
	 		    }
	 		}
	 		document.getElementById("subNumberSearch").value=subNumber;
	 		document.getElementById("mainNumberSearch").value=mainNumber;
	 		document.getElementById("subWeightSearch").value=subWeight.toFixed(3);
	 		document.getElementById("mainWeightSearch").value=mainWeight.toFixed(3);
	 		
		 }
 
	 });
}




function downloadExcel() {

	var result = document.getElementById("result").value;
	alert("开始下载Excel文件");
	$.ajax({
		 url:"/b/downloadExcel",
		 type:"post",
		 data:{
		 	result:result,
		 },
	 	 dateType:"json",
	 	 success:function(result) {
	 		alert(result);
	 	 } 
	 });

}
function downloadExcelSupplier() {

	var result = document.getElementById("result").value;
	alert("开始下载Excel文件");
	$.ajax({
		 url:"/b/downloadExcelSupplier",
		 type:"post",
		 data:{
		 	result:result,
		 },
	 	 dateType:"json",
	 	 success:function(result) {
	 		alert(result);
	 	 } 
	 });
	

}


function checkStoneUpload(){
	
	var type = $("option[name='stone_channelNoRadio']:checked").val();  //选择被选中Radio的Value值
	var f =  document.getElementById("StoneFile").files;//获取文件信息
	if(f==null) {
		alert("请选择文件！" );
		return false;
	}
	var size = f[0].size/1024;//文件大小   单位'kb'
	var fileName = f[0].name;//文件名称
	var index = fileName.lastIndexOf(".");
	var suffix =fileName.substring(index+1);//文件后缀名
	if(type==null){
		alert("请选择来源！");
		return false;
	}
	if(suffix.indexOf("xls")==-1) {
		alert("文件类型不对，请重新选择！");
		return false;
	}else if(size <=0){
		alert("文件大小为空，请选择其它的文件 ！");
		return false;
	}else {
		alert("您选择的文件"+"\n"+"文件："+fileName+"\n"+"来源："+type);
		return true;
	}
	
	
}


function insertStone() {//生成订单
	 var table = document.getElementById("SignFrame");
	 var supplier = document.getElementById("supplierChoice").value;
	 var procord_batch = document.getElementById("procord_batch").value;
	 var procord_delydate = document.getElementById("procord_delydate").value;
	 var procord_delyman = document.getElementById("procord_delyman").value;
	 var procord_preparer = document.getElementById("procord_preparer").value;
	 var procord_porter = document.getElementById("procord_porter").value;
	 var td = table.getElementsByTagName("td");
	 if(supplier.length == 0) {
		 alert("请选择供应商");
		 return false;
	 }
	 if(procord_batch.length == 0) {
		 alert("请填写批次");
		 return false;
	 }
	 if(procord_delydate.length == 0) {
		 alert("请填写出货日期");
		 return false;
	 }
	 if(procord_delyman.length == 0) {
		 alert("请填写送货人");
		 return false;
	 }
	 if(procord_preparer.length == 0) {
		 alert("请填写经手人");
		 return false;
	 }
	 if(procord_porter.length == 0) {
		 alert("请填写接货人");
		 return false;
	 }
	 var len = td.length;
	 var str ="";
	 for(i=0;i<len;i++){
		 if(td[i].innerHTML.indexOf("input")!=-1) {
			 var s = "";
			 var ss = "";
			 if(td[i].innerHTML.indexOf("sub")!=-1) {
				 s = "sub"+td[i-3].innerHTML;
				 ss = document.getElementById(s).value;
			 }else if(td[i].innerHTML.indexOf("content")!=-1) {
				 s = "content"+td[i-5].innerHTML;
				 ss = document.getElementById(s).value;
				 if(ss.length==0) {
					ss="none"; 
				 }
			 }
			
			 str +=ss+'&';		 
		 }else if(td[i].innerHTML.indexOf("href")!=-1){
		 }else {
			 str +=td[i].innerHTML+'&';
		 }
	  }
	 document.getElementById("table_body").value=str;
	 alert("开始写入");
	 $("#formOrder").submit();
	
	
}
function handleEnter(field, event) {
    var keyCode = event.keyCode ? event.keyCode : event.which ? event.which
            : event.charCode;
    if (keyCode == 13) {
        var i;
        for (i = 0; i < field.form.elements.length; i++)
            if (field == field.form.elements[i])
                break;
        i = (i + 1) % field.form.elements.length;
        field.form.elements[i].focus();
        return false;
    } else
        return true;
}


function checkCopy(){
	var result=0;
	var r=confirm("您将要执行提交入库操作，请仔细检查核对数据!")
	  if (r==true)
	    {
	    //alert("确认");
	    $.ajax({
			 url:"/b/copyToStone",
			 type:"post",
			 dataType: "json",  
	         async: false,//同步  
			 success:function(json) {
			
			 		alert("成功提交！");
			 }
		 });
			 location.reload();
	    }
	  else
	    {
		  //alert("未确认");
	    }
	 
 }

function updateStone() {
	var stoneShowList = document.getElementById("stoneShowList");
	stoneShowList.style.display="block";
	var stoneEdit = document.getElementById("stoneEdit");
	stoneEdit.style.display="none";
	
}

function editToList(){
	$("#stoneShowList").show();
	$("#stoneEdit").hide();
}
function editPToListP(){
	$("#ProcordShowList").show();
	$("#ProcordEdit").hide();
}




function check() {
	if($("#stone_purchdate").val()==null){
		alert("请选择日期");
		return false;
	} else if($("#stone_loosdofty").val()==null){
		alert("请选择裸石厂");
		return false;
	} else	if($("#stone_porter").val()==null) {
		alert("请输入接货人");
		return false;
	}else	if($("#stone_preparer").val()==null) {
		alert("请输入送货人");
		return false;
	}else {
		return true;
	}		
	
}


function findStoneCopyByStoneIDAJAX(node) {
	//var tr1 = node.parentNode.parentNode;  
   // alert(tr1.rowIndex);  
    //alert(tr1.cells[0].innerText); 
   // var sid = tr1.cells[0].innerText;
	//alert(sid);
	var sid = node.value;
	$.ajax({
		 url:"/b/findStoneCopyByStoneIDAJAX",
		 type:"post",
	 	data:{
	 		sid:sid,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		//alert(result.stone_seqno);
	 		var now   = new Date(result.stone_purchdate);
	 		var mydiv = document.getElementById("mydiv_edit");
	 		//置空
	 		document.getElementById("eastone_ID").value = "";
	 		document.getElementById("eastone_seqno").value = "";
	 		document.getElementById("eastone_purchdate").value ="" ;
	 		document.getElementById("eastone_loosdofty").value ="" ;
	 		document.getElementById("eastone_substoNo").value ="" ;
		 	document.getElementById("eastone_substoName").value = "";
		 	document.getElementById("eastone_substoWgt").value = "";
		 	document.getElementById("eastone_substoPrperct").value = "";
		 	document.getElementById("eastone_substoPramt").value ="" ;
		 	document.getElementById("eastone_substoNumber").value = "";
		 	document.getElementById("eastone_mainName").value = "";
		 	document.getElementById("eastone_mainStoneNo").value = "";
		 	document.getElementById("eastone_spec").value = "";
		 	document.getElementById("eastone_mainNumber").value = "";
		 	document.getElementById("eastone_mainWeight").value = "";
		 	document.getElementById("eastone_mainPrperct").value = "";
		 	document.getElementById("eastone_mainPramt").value = "";
 			document.getElementById("eastone_shape").value = "";
	 		document.getElementById("eastone_color").value ="" ;
	 		document.getElementById("eastone_clarity").value ="" ;
	 		document.getElementById("eastone_color2").value = "";
	 		document.getElementById("eastone_clarity2").value = "";
	 		document.getElementById("eastone_cut").value = "";
	 		document.getElementById("eastone_polish").value = "";
	 		document.getElementById("eastone_fluorescence").value ="" ;
	 		document.getElementById("eastone_symmetry").value ="" ;
	 		document.getElementById("eastone_diameter").value ="" ;	
	 		document.getElementById("eastone_height").value = "";	
	 		document.getElementById("eastone_tablewidth").value = "";
	 		document.getElementById("eastone_preparer").value ="" ;
	 		document.getElementById("eastone_porter").value = "";
	 		document.getElementById("eastone_comments").value = "";
	 		document.getElementById("eastone_channelNo").value ="" ;
	 		document.getElementById("eastone_GIA").value = ""; 
	 		
	 		
	 		
	 		//放值
	 		document.getElementById("eastone_ID").value =result.stone_ID;
	 		document.getElementById("eastone_seqno").value = result.stone_seqno;
	 		document.getElementById("eastone_purchdate").value = format(now);
	 		document.getElementById("eastone_loosdofty").value = result.stone_loosdofty;
	 		
	 		if(result.stone_mainStoneNo.toString().length>2) { //这条记录是主石
	 			document.getElementById("eastone_mainName").value = result.stone_mainName;
	 			document.getElementById("eastone_mainStoneNo").value = result.stone_mainStoneNo;
		 		document.getElementById("eastone_spec").value = result.stone_spec;
		 		document.getElementById("eastone_mainNumber").value = result.stone_mainNumber;
		 		document.getElementById("eastone_mainWeight").value = result.stone_mainWeight;
		 		document.getElementById("eastone_mainPrperct").value = result.stone_mainPrperct;
		 		document.getElementById("eastone_mainPramt").value = result.stone_mainPramt;
		 		document.getElementById("eastone_substoNo").value = null;
		 		document.getElementById("eastone_substoName").value = null;
		 		document.getElementById("eastone_substoWgt").value = null;
		 		document.getElementById("eastone_substoPrperct").value = null;
		 		document.getElementById("eastone_substoPramt").value = null;
		 		document.getElementById("eastone_substoNumber").value = null;
	 		}
	 		if(result.stone_substoNo.toString().length>2) {//这条记录是副石
	 			document.getElementById("eastone_substoNo").value = result.stone_substoNo;
		 		document.getElementById("eastone_substoName").value = result.stone_substoName;
		 		document.getElementById("eastone_substoWgt").value = result.stone_substoWgt;
		 		document.getElementById("eastone_substoPrperct").value = result.stone_substoPrperct;
		 		document.getElementById("eastone_substoPramt").value = result.stone_substoPramt;
		 		document.getElementById("eastone_substoNumber").value = result.stone_substoNumber;
		 		document.getElementById("eastone_mainName").value = null;
		 		document.getElementById("eastone_mainStoneNo").value = null;
		 		document.getElementById("eastone_spec").value = null;
		 		document.getElementById("eastone_mainNumber").value = null;
		 		document.getElementById("eastone_mainWeight").value = null;
		 		document.getElementById("eastone_mainPrperct").value = null;
		 		document.getElementById("eastone_mainPramt").value = null;
	 		}

	 		document.getElementById("eastone_shape").value = result.stone_shape;
	 		document.getElementById("eastone_color").value = result.stone_color;
	 		document.getElementById("eastone_clarity").value = result.stone_clarity;
	 		document.getElementById("eastone_color2").value = result.stone_color2;
	 		document.getElementById("eastone_clarity2").value = result.stone_clarity2;
	 		document.getElementById("eastone_cut").value = result.stone_cut;
	 		document.getElementById("eastone_polish").value = result.stone_polish;
	 		document.getElementById("eastone_fluorescence").value = result.stone_fluorescence;
	 		document.getElementById("eastone_symmetry").value = result.stone_symmetry;
	 		if(result.stone_diameter!=0) {
	 			document.getElementById("eastone_diameter").value = result.stone_diameter;
	 		}
	 		if(result.stone_height!=0){
	 			document.getElementById("eastone_height").value = result.stone_height;
	 		}
	 		if(result.stone_tablewidth!=0) {
	 			document.getElementById("eastone_tablewidth").value = result.stone_tablewidth;
	 		}
	 		document.getElementById("eastone_preparer").value = result.stone_preparer;
	 		document.getElementById("eastone_porter").value = result.stone_porter;
	 		document.getElementById("eastone_comments").value = result.stone_comments;
	 		document.getElementById("eastone_channelNo").value = result.stone_channelNo;
	 		document.getElementById("eastone_GIA").value = result.stone_GIA;
	 		mydiv.style.display="block";
	 	}

	 });
}



//查询与统计   ---》查看详情
function findStoneByStoneIDAJAX(node) {
	//var tr1 = node.parentNode.parentNode;  
   // alert(tr1.rowIndex);  
    //alert(tr1.cells[0].innerText); 
    //var sid = tr1.cells[0].innerText;
	//alert(sid);
	var sid = node.value;
	$.ajax({
		 url:"/b/findStoneByStoneIDAJAX",
		 type:"post",
	 	data:{
	 		sid:sid,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		
	 		var now   = new Date(result.stone_purchdate);
	 		var mydiv = document.getElementById("mydiv");
	 		//置空
	 		
	 		document.getElementById("astone_seqno").value = "";
	 		document.getElementById("astone_purchdate").value ="" ;
	 		document.getElementById("astone_loosdofty").value ="" ;
	 		document.getElementById("astone_substoNo").value ="" ;
		 	document.getElementById("astone_substoName").value = "";
		 	document.getElementById("astone_substoWgt").value = "";
		 	document.getElementById("astone_substoPrperct").value = "";
		 	document.getElementById("astone_substoPramt").value ="" ;
		 	document.getElementById("astone_substoNumber").value = "";
		 	document.getElementById("astone_mainName").value = "";
		 	document.getElementById("astone_mainStoneNo").value = "";
		 	document.getElementById("astone_spec").value = "";
		 	document.getElementById("astone_mainNumber").value = "";
		 	document.getElementById("astone_mainWeight").value = "";
		 	document.getElementById("astone_mainPrperct").value = "";
		 	document.getElementById("astone_mainPramt").value = "";
 			document.getElementById("astone_shape").value = ""; 
	 		document.getElementById("astone_color").value ="" ;
	 		document.getElementById("astone_clarity").value ="" ;
	 		document.getElementById("astone_color2").value = "";
	 		document.getElementById("astone_clarity2").value = "";
	 		document.getElementById("astone_cut").value = "";
	 		document.getElementById("astone_polish").value = "";
	 		document.getElementById("astone_fluorescence").value ="" ;
	 		document.getElementById("astone_symmetry").value ="" ;
	 		document.getElementById("astone_diameter").value ="" ;	
	 		document.getElementById("astone_height").value = "";	
	 		document.getElementById("astone_tablewidth").value = "";
	 		document.getElementById("astone_preparer").value ="" ;
	 		document.getElementById("astone_porter").value = "";
	 		document.getElementById("astone_comments").value = "";
	 		document.getElementById("astone_channelNo").value ="" ;
	 		document.getElementById("astone_GIA").value = "";
	 		
	 		
	 		
	 		//放值
	 		document.getElementById("astone_seqno").value = result.stone_seqno;
	 		document.getElementById("astone_purchdate").value = format(now);
	 		document.getElementById("astone_loosdofty").value = result.stone_loosdofty;
	 		if(result.stone_mainStoneNo.toString().length>2) {//mainStone
	 			document.getElementById("astone_mainName").value = result.stone_mainName;
		 		document.getElementById("astone_mainStoneNo").value = result.stone_mainStoneNo;
		 		document.getElementById("astone_spec").value = result.stone_spec;
		 		document.getElementById("astone_mainNumber").value = result.stone_mainNumber;
		 		document.getElementById("astone_mainWeight").value = result.stone_mainWeight;
		 		document.getElementById("astone_mainPrperct").value = result.stone_mainPrperct;
		 		document.getElementById("astone_mainPramt").value = result.stone_mainPramt;
		 		document.getElementById("astone_substoNo").value = null;
		 		document.getElementById("astone_substoName").value = null;
		 		document.getElementById("astone_substoWgt").value = null;
		 		document.getElementById("astone_substoPrperct").value = null;
		 		document.getElementById("astone_substoPramt").value = null;
		 		document.getElementById("astone_substoNumber").value = null;
	 		}
	 		if(result.stone_substoNo.toString().length>2) {//subStone
	 			document.getElementById("astone_substoNo").value = result.stone_substoNo;
		 		document.getElementById("astone_substoName").value = result.stone_substoName;
		 		document.getElementById("astone_substoWgt").value = result.stone_substoWgt;
		 		document.getElementById("astone_substoPrperct").value = result.stone_substoPrperct;
		 		document.getElementById("astone_substoPramt").value = result.stone_substoPramt;
		 		document.getElementById("astone_substoNumber").value = result.stone_substoNumber;
		 		document.getElementById("astone_mainName").value = null;
		 		document.getElementById("astone_mainStoneNo").value = null;
		 		document.getElementById("astone_spec").value = null;
		 		document.getElementById("astone_mainNumber").value = null;
		 		document.getElementById("astone_mainWeight").value = null;
		 		document.getElementById("astone_mainPrperct").value = null;
		 		document.getElementById("astone_mainPramt").value = null;
	 		}

	 		document.getElementById("astone_shape").value = result.stone_shape;
	 		document.getElementById("astone_color").value = result.stone_color;
	 		document.getElementById("astone_clarity").value = result.stone_clarity;
	 		document.getElementById("astone_color2").value = result.stone_color2;
	 		document.getElementById("astone_clarity2").value = result.stone_clarity2;
	 		document.getElementById("astone_cut").value = result.stone_cut;
	 		document.getElementById("astone_polish").value = result.stone_polish;
	 		document.getElementById("astone_fluorescence").value = result.stone_fluorescence;
	 		document.getElementById("astone_symmetry").value = result.stone_symmetry;
	 		if(result.stone_diameter!=0) {
	 			document.getElementById("astone_diameter").value = result.stone_diameter;
	 		}
	 		if(result.stone_height!=0){
	 			document.getElementById("astone_height").value = result.stone_height;
	 		}
	 		if(result.stone_tablewidth!=0) {
	 			document.getElementById("astone_tablewidth").value = result.stone_tablewidth;
	 		}
	 		document.getElementById("astone_preparer").value = result.stone_preparer;
	 		document.getElementById("astone_porter").value = result.stone_porter;
	 		document.getElementById("astone_comments").value = result.stone_comments;
	 		document.getElementById("astone_channelNo").value = result.stone_channelNo;
	 		document.getElementById("astone_GIA").value = result.stone_GIA;
	 		mydiv.style.display="block";
	 	}

	 });
}


//查询与统计   ---》查看详情(新)
function findStoneByStoneIDAJAXShow(node) {
  var sid = node.value;
	//alert(sid);
	$.ajax({
		 url:"/b/findStoneByStoneIDAJAX",
		 type:"post",
	 	data:{
	 		sid:sid,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		
	 		var now   = new Date(result.stone_purchdate);
	 		var mydiv = document.getElementById("mydiv");
	 		//置空
	 		
	 		document.getElementById("astone_seqno").value = "";
	 		document.getElementById("astone_purchdate").value ="" ;
	 		document.getElementById("astone_loosdofty").value ="" ;
	 		document.getElementById("astone_substoNo").value ="" ;
		 	document.getElementById("astone_substoName").value = "";
		 	document.getElementById("astone_substoWgt").value = "";
		 	document.getElementById("astone_substoPrperct").value = "";
		 	document.getElementById("astone_substoPramt").value ="" ;
		 	document.getElementById("astone_substoNumber").value = "";
		 	document.getElementById("astone_mainName").value = "";
		 	document.getElementById("astone_mainStoneNo").value = "";
		 	document.getElementById("astone_spec").value = "";
		 	document.getElementById("astone_mainNumber").value = "";
		 	document.getElementById("astone_mainWeight").value = "";
		 	document.getElementById("astone_mainPrperct").value = "";
		 	document.getElementById("astone_mainPramt").value = "";
			document.getElementById("astone_shape").value = ""; 
	 		document.getElementById("astone_color").value ="" ;
	 		document.getElementById("astone_clarity").value ="" ;
	 		document.getElementById("astone_color2").value = "";
	 		document.getElementById("astone_clarity2").value = "";
	 		document.getElementById("astone_cut").value = "";
	 		document.getElementById("astone_polish").value = "";
	 		document.getElementById("astone_fluorescence").value ="" ;
	 		document.getElementById("astone_symmetry").value ="" ;
	 		document.getElementById("astone_diameter").value ="" ;	
	 		document.getElementById("astone_height").value = "";	
	 		document.getElementById("astone_tablewidth").value = "";
	 		document.getElementById("astone_preparer").value ="" ;
	 		document.getElementById("astone_porter").value = "";
	 		document.getElementById("astone_comments").value = "";
	 		document.getElementById("astone_channelNo").value ="" ;
	 		document.getElementById("astone_GIA").value = "";
	 		
	 		
	 		
	 		//放值
	 		document.getElementById("astone_seqno").value = result.stone_seqno;
	 		document.getElementById("astone_purchdate").value = format(now);
	 		document.getElementById("astone_loosdofty").value = result.stone_loosdofty;
	 		if(result.stone_mainStoneNo.toString().length>2) {//mainStone
	 			document.getElementById("astone_mainName").value = result.stone_mainName;
		 		document.getElementById("astone_mainStoneNo").value = result.stone_mainStoneNo;
		 		document.getElementById("astone_spec").value = result.stone_spec;
		 		document.getElementById("astone_mainNumber").value = result.stone_mainNumber;
		 		document.getElementById("astone_mainWeight").value = result.stone_mainWeight;
		 		document.getElementById("astone_mainPrperct").value = result.stone_mainPrperct;
		 		document.getElementById("astone_mainPramt").value = result.stone_mainPramt;
		 		document.getElementById("astone_substoNo").value = null;
		 		document.getElementById("astone_substoName").value = null;
		 		document.getElementById("astone_substoWgt").value = null;
		 		document.getElementById("astone_substoPrperct").value = null;
		 		document.getElementById("astone_substoPramt").value = null;
		 		document.getElementById("astone_substoNumber").value = null;
	 		}
	 		if(result.stone_substoNo.toString().length>2) {//subStone
	 			document.getElementById("astone_substoNo").value = result.stone_substoNo;
		 		document.getElementById("astone_substoName").value = result.stone_substoName;
		 		document.getElementById("astone_substoWgt").value = result.stone_substoWgt;
		 		document.getElementById("astone_substoPrperct").value = result.stone_substoPrperct;
		 		document.getElementById("astone_substoPramt").value = result.stone_substoPramt;
		 		document.getElementById("astone_substoNumber").value = result.stone_substoNumber;
		 		document.getElementById("astone_mainName").value = null;
		 		document.getElementById("astone_mainStoneNo").value = null;
		 		document.getElementById("astone_spec").value = null;
		 		document.getElementById("astone_mainNumber").value = null;
		 		document.getElementById("astone_mainWeight").value = null;
		 		document.getElementById("astone_mainPrperct").value = null;
		 		document.getElementById("astone_mainPramt").value = null;
	 		}

	 		document.getElementById("astone_shape").value = result.stone_shape;
	 		document.getElementById("astone_color").value = result.stone_color;
	 		document.getElementById("astone_clarity").value = result.stone_clarity;
	 		document.getElementById("astone_color2").value = result.stone_color2;
	 		document.getElementById("astone_clarity2").value = result.stone_clarity2;
	 		document.getElementById("astone_cut").value = result.stone_cut;
	 		document.getElementById("astone_polish").value = result.stone_polish;
	 		document.getElementById("astone_fluorescence").value = result.stone_fluorescence;
	 		document.getElementById("astone_symmetry").value = result.stone_symmetry;
	 		if(result.stone_diameter!=0) {
	 			document.getElementById("astone_diameter").value = result.stone_diameter;
	 		}
	 		if(result.stone_height!=0){
	 			document.getElementById("astone_height").value = result.stone_height;
	 		}
	 		if(result.stone_tablewidth!=0) {
	 			document.getElementById("astone_tablewidth").value = result.stone_tablewidth;
	 		}
	 		document.getElementById("astone_preparer").value = result.stone_preparer;
	 		document.getElementById("astone_porter").value = result.stone_porter;
	 		document.getElementById("astone_comments").value = result.stone_comments;
	 		document.getElementById("astone_channelNo").value = result.stone_channelNo;
	 		document.getElementById("astone_GIA").value = result.stone_GIA;
	 		mydiv.style.display="block";
	 	}

	 });
}
Date.prototype.Format = function (fmt) { //author: meizz

    var o = {
        "M+": this.getMonth() + 1, //月份

        "d+": this.getDate(), //日

        "h+": this.getHours(), //小时

        "m+": this.getMinutes(), //分

        "s+": this.getSeconds(), //秒

        "q+": Math.floor((this.getMonth() + 3) / 3), //季度

        "S": this.getMilliseconds() //毫秒

    };
   if (/(y+)/.test(fmt)) {
       fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
   }
   for (var k in o) {
       if (new RegExp("(" + k + ")").test(fmt)) {
           fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
       }
   }
   return fmt;
}
function editProcord(node) {
	var procord_no = node.value;
	$.ajax({
		 url:"/b/editProcord",
		 type:"post",
	 	data:{
	 		procord_no:procord_no,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		//alert(result);
	 		var now1   = new Date(result.procord_date);
	 		var now2   = new Date(result.procord_delydate);
	 		document.getElementById("eprocord_no").value = result.procord_no;
	 		document.getElementById("eprocord_supplier").value = result.procord_supplier;
	 		document.getElementById("eprocord_batch").value = result.procord_batch;
	 		document.getElementById("eprocord_date").value = format(now1);
	 		document.getElementById("eprocord_delydate").value = format(now2);
	 		document.getElementById("eprocord_pay").value = result.procord_pay;
	 		document.getElementById("eprocord_delyman").value = result.procord_delyman;
	 		document.getElementById("eprocord_preparer").value = result.procord_preparer;
	 		document.getElementById("eprocord_porter").value = result.procord_porter;
	 		$("#ProcordShowList").hide();
	 		$("#ProcordEdit").show();
	 	}
	 });
}






function findStoneByStoneIDAJAXEdit(node) {
	//alert("asdas");
	//alert(sid.id);
	var sid = node.id.split("@")[1];
	$.ajax({
		 url:"/b/findStoneByStoneIDAJAX",
		 type:"post",
	 	data:{
	 		sid:sid,
	 	},
	 	dateType:"json",
	 	success:function(result) {
	 		//alert(result.stone_seqno);
	 		var now1   = new Date(result.stone_purchdate);
	 		var stoneShowList = document.getElementById("stoneShowList");
	 		//置空
	 		document.getElementById("estone_ID").value = "";
	 		document.getElementById("estone_seqno").value = "";
	 		document.getElementById("estone_purchdate").value ="" ;
	 		document.getElementById("estone_loosdofty").value ="" ;
	 		document.getElementById("estone_substoNo").value ="" ;
		 	document.getElementById("estone_substoName").value = "";
		 	document.getElementById("estone_substoWgt").value = "";
		 	document.getElementById("estone_substoPrperct").value = "";
		 	document.getElementById("estone_substoPramt").value ="" ;
		 	document.getElementById("estone_substoNumber").value = "";
		 	document.getElementById("estone_mainName").value = "";
		 	document.getElementById("estone_mainStoneNo").value = "";
		 	document.getElementById("estone_spec").value = "";
		 	document.getElementById("estone_mainNumber").value = "";
		 	document.getElementById("estone_mainWeight").value = "";
		 	document.getElementById("estone_mainPrperct").value = "";
		 	document.getElementById("estone_mainPramt").value = "";
 			document.getElementById("estone_shape").value = "";
	 		document.getElementById("estone_color").value ="" ;
	 		document.getElementById("estone_clarity").value ="" ;
	 		document.getElementById("estone_color2").value = "";
	 		document.getElementById("estone_clarity2").value = "";
	 		document.getElementById("estone_cut").value = "";
	 		document.getElementById("estone_polish").value = "";
	 		document.getElementById("estone_fluorescence").value ="" ;
	 		document.getElementById("estone_symmetry").value ="" ;
	 		document.getElementById("estone_diameter").value ="" ;	
	 		document.getElementById("estone_height").value = "";	
	 		document.getElementById("estone_tablewidth").value = "";
	 		document.getElementById("estone_preparer").value ="" ;
	 		document.getElementById("estone_porter").value = "";
	 		document.getElementById("estone_comments").value = "";
	 		document.getElementById("estone_channelNo").value ="" ;
	 		document.getElementById("estone_GIA").value = "";
	 		
	 		//放值
	 		document.getElementById("estone_ID").value = result.stone_ID;
	 		document.getElementById("estone_seqno").value = result.stone_seqno;
	 		document.getElementById("estone_purchdate").value = format(now1);
	 		document.getElementById("estone_loosdofty").value = result.stone_loosdofty;
	 		if(result.stone_mainStoneNo.toString().length>2) {//mainStone
	 			document.getElementById("estone_mainName").value = result.stone_mainName;
		 		document.getElementById("estone_mainStoneNo").value = result.stone_mainStoneNo;
		 		document.getElementById("estone_spec").value = result.stone_spec;
		 		document.getElementById("estone_mainNumber").value = result.stone_mainNumber;
		 		document.getElementById("estone_mainWeight").value = result.stone_mainWeight;
		 		document.getElementById("estone_mainPrperct").value = result.stone_mainPrperct;
		 		document.getElementById("estone_mainPramt").value = result.stone_mainPramt;
		 		document.getElementById("estone_substoNo").value = null;
		 		document.getElementById("estone_substoName").value = null;
		 		document.getElementById("estone_substoWgt").value = null;
		 		document.getElementById("estone_substoPrperct").value = null;
		 		document.getElementById("estone_substoPramt").value = null;
		 		document.getElementById("estone_substoNumber").value = null;
		 		
	 		}
	 		if(result.stone_substoNo.toString().length>2) {//subStone
	 			document.getElementById("estone_substoNo").value = result.stone_substoNo;
		 		document.getElementById("estone_substoName").value = result.stone_substoName;
		 		document.getElementById("estone_substoWgt").value = result.stone_substoWgt;
		 		document.getElementById("estone_substoPrperct").value = result.stone_substoPrperct;
		 		document.getElementById("estone_substoPramt").value = result.stone_substoPramt;
		 		document.getElementById("estone_substoNumber").value = result.stone_substoNumber;
		 		document.getElementById("estone_mainName").value = null;
		 		document.getElementById("estone_mainStoneNo").value = null;
		 		document.getElementById("estone_spec").value = null;
		 		document.getElementById("estone_mainNumber").value = null;
		 		document.getElementById("estone_mainWeight").value = null;
		 		document.getElementById("estone_mainPrperct").value = null;
		 		document.getElementById("estone_mainPramt").value = null;
	 		}

	 		document.getElementById("estone_shape").value = result.stone_shape;
	 		document.getElementById("estone_color").value = result.stone_color;
	 		document.getElementById("estone_clarity").value = result.stone_clarity;
	 		document.getElementById("estone_color2").value = result.stone_color2;
	 		document.getElementById("estone_clarity2").value = result.stone_clarity2;
	 		document.getElementById("estone_cut").value = result.stone_cut;
	 		document.getElementById("estone_polish").value = result.stone_polish;
	 		document.getElementById("estone_fluorescence").value = result.stone_fluorescence;
	 		document.getElementById("estone_symmetry").value = result.stone_symmetry;
	 		if(result.stone_diameter!=0) {
	 			document.getElementById("estone_diameter").value = result.stone_diameter;
	 		}
	 		if(result.stone_height!=0){
	 			document.getElementById("estone_height").value = result.stone_height;
	 		}
	 		if(result.stone_tablewidth!=0) {
	 			document.getElementById("estone_tablewidth").value = result.stone_tablewidth;
	 		}
	 		
	 		document.getElementById("estone_preparer").value = result.stone_preparer;
	 		document.getElementById("estone_porter").value = result.stone_porter;
	 		document.getElementById("estone_comments").value = result.stone_comments;
	 		document.getElementById("estone_channelNo").value = result.stone_channelNo;
	 		document.getElementById("estone_GIA").value = result.stone_GIA;
	 		stoneShowList.style.display="none";
	 		var stoneEdit = document.getElementById("stoneEdit");
	 		stoneEdit.style.display="block";
	 		
	 		
	 	}

	 });
}


function CloseDiv(div){
	var mydiv = document.getElementById("mydiv");
		mydiv.style.display="none";
}
function CloseDiv_edit(div){
	var mydiv = document.getElementById("mydiv_edit");
		mydiv.style.display="none";
}




$("#btn_ruku").click(function(){
	 $("#ruku").show();
	 $("#searchAndsum").hide();
	 $("#manage").hide();
	 $("#xuanshi").hide();
	 $("#songshichuku").hide();
	 $("#tbackStone").hide();
	 
	 $("#btn_ruku").css("background","blue");
	 $("#btn_ruku").css("color","white");
	 $("#btn_search").css("background","#34495E");
	 $("#btn_manage").css("background","#34495E");
	 $("#btn_xuanshi").css("background","#34495E");
	 $("#btn_songshishichuku").css("background","#34495E");
	 $("#btn_tbackStone").css("background","#34495E");
	
});
$("#btn_search").click(function(){
	 $("#ruku").hide();
	 $("#searchAndsum").show();
	 $("#showstonebysupplier").show();
	 $("#stoneSearchList").hide();
	 $("#manage").hide();
	 $("#xuanshi").hide();
	 $("#addStone").hide();
	 $("#songshichuku").hide();
	 $("#tbackStone").hide();
	 
	 $("#btn_ruku").css("background","#34495E");
	 $("#btn_search").css("background","blue");
	 $("#btn_search").css("color","white");
	 $("#btn_manage").css("background","#34495E");
	 $("#btn_xuanshi").css("background","#34495E");
	 $("#btn_songshishichuku").css("background","#34495E");
	 $("#btn_tbackStone").css("background","#34495E");
});
$("#btn_manage").click(function(){
	 $("#ruku").hide();
	 $("#searchAndsum").hide();
	 $("#manage").show();
	 $("#addStone").hide();
	 $("#xuanshi").hide();
	 $("#songshichuku").hide();
	 $("#stoneShowList").show();
	 $("#stoneEdit").hide();
	 $("#tbackStone").hide();
	 
	 $("#btn_ruku").css("background","#34495E");
	 $("#btn_manage").css("background","blue");
	 $("#btn_manage").css("color","white");
	 $("#btn_search").css("background","#34495E");
	 $("#btn_xuanshi").css("background","#34495E");
	 $("#btn_songshishichuku").css("background","#34495E");
	 $("#btn_tbackStone").css("background","#34495E");
});
$("#btn_xuanshi").click(function(){
	 $("#ruku").hide();
	 $("#searchAndsum").hide();
	 $("#manage").hide();
	 $("#xuanshi").show();
	 $("#addStone").hide();
	 $("#songshichuku").hide();
	 $("#tbackStone").hide();
	 
	 $("#btn_ruku").css("background","#34495E");
	 $("#btn_manage").css("background","#34495E");
	 $("#btn_search").css("background","#34495E");
	 $("#btn_xuanshi").css("background","blue");
	 $("#btn_xuanshi").css("color","white");
	 $("#btn_songshishichuku").css("background","#34495E");
	 $("#btn_tbackStone").css("background","#34495E");
});

$("#btn_songshishichuku").click(function(){
	 $("#ruku").hide();
	 $("#searchAndsum").hide();
	 $("#manage").hide();
	 $("#xuanshi").hide();
	 $("#songshichuku").show(); 
	 $("#addStone").hide();
	 $("#ProcordShowList").show();
	 $("#ProcordEdit").hide();
	 $("#tbackStone").hide();
	 
	 $("#btn_ruku").css("background","#34495E");
	 $("#btn_manage").css("background","#34495E");
	 $("#btn_search").css("background","#34495E");
	 $("#btn_xuanshi").css("background","#34495E");
	 $("#btn_songshishichuku").css("background","blue");
	 $("#btn_songshishichuku").css("color","white");
	 $("#btn_tbackStone").css("background","#34495E");
});
$("#btn_tbackStone").click(function(){
	 $("#ruku").hide();
	 $("#searchAndsum").hide();
	 $("#manage").hide();
	 $("#xuanshi").hide();
	 $("#songshichuku").hide(); 
	 $("#addStone").hide();
	 $("#ProcordShowList").hide();
	 $("#ProcordEdit").hide();
	 $("#tbackStone").show();
	
	 $("#btn_ruku").css("background","#34495E");
	 $("#btn_manage").css("background","#34495E");
	 $("#btn_search").css("background","#34495E");
	 $("#btn_xuanshi").css("background","#34495E");
	 $("#btn_tbackStone").css("background","blue");
	 $("#btn_tbackStone").css("color","white");
	 $("#btn_songshishichuku").css("background","#34495E");
});


$('#queryTypeStone').change(function(){ 
	var id = $(this).val();
	if(id=="stone_purchdate") {
		$("#div_date").show();
		$("#div_date2").show();
		$("#div_mainNo").hide();
		$("#div_subNo").hide();
		$("#div_loosdofty").hide();
		$("#div_supplier").hide();
	}else if(id=="stone_mainStoneNo") {
		$("#div_date").hide();
		$("#div_date2").hide();
		$("#div_mainNo").show();
		$("#div_subNo").hide();
		$("#div_loosdofty").hide();
		$("#div_supplier").hide();
	}else if(id=="stone_substoNo") {
		$("#div_date").hide();
		$("#div_date2").hide();
		$("#div_mainNo").hide();
		$("#div_subNo").show();
		$("#div_loosdofty").hide();
		$("#div_supplier").hide();
	}else if(id=="stone_loosdofty") {
		$("#div_date").hide();
		$("#div_date2").hide();
		$("#div_mainNo").hide();
		$("#div_subNo").hide();
		$("#div_supplier").hide();
		$("#div_loosdofty").show();	
	}else if(id=="stone_supplier") {
		$("#div_date").hide();
		$("#div_date2").hide();
		$("#div_mainNo").hide();
		$("#div_subNo").hide();
		$("#div_loosdofty").hide();
		$("#div_supplier").show();		
	}
});
$('#queryTypetbackStone').change(function(){ 
	var id = $(this).val();
	if(id=="tback_time") {
		$("#div_tdate").show();
		$("#div_tdate2").show();
		$("#div_tStoneNo").hide();
	}else if(id=="tback_no") {
		$("#div_tdate").hide();
		$("#div_tdate2").hide();
		$("#div_tStoneNo").show();
	}
});




function retrieveData(sSource, aoData, fnCallback ) {
    $.ajax({
        url : sSource,//这个就是请求地址对应sAjaxSource
        data : {"aoData":JSON.stringify(aoData)},//这个是把datatable的一些基本数据传给后台,比如起始位置,每页显示的行数
        type : 'post',
        dataType : 'json',
        async : false,
        success : function(result) {
            fnCallback(result);//把返回的数据传给这个方法就可以了,datatable会自动绑定数据的
        },
        error : function(msg) {
            alert(msg);
        }
    });
}
function retrieveSupplierStoneData(sSource, aoData, fnCallback ) {
	var supplier = document.getElementById("supplier").value;
    $.ajax({
        url : sSource,//这个就是请求地址对应sAjaxSource
        data : {
        	"aoData":JSON.stringify(aoData),
        	"supplierName":supplier
        	
        },//这个是把datatable的一些基本数据传给后台,比如起始位置,每页显示的行数
        type : 'post',
        dataType : 'json',
        async : false,
        success : function(result) {
            fnCallback(result);//把返回的数据传给这个方法就可以了,datatable会自动绑定数据的
        },
        error : function(msg) {
            alert(msg);
        }
    });
}
    function retrieveProcordData(sSource, aoData, fnCallback ) {
        $.ajax({
            url : sSource,//这个就是请求地址对应sAjaxSource
            data : {
                "aoData":JSON.stringify(aoData),
                "procordNo":$("#procordNo").val(),
                "procordSupplier":$("#procordSupplier").val(),
                "procordBatch":$("#procordBatch").val(),
                "procordDate":$("#procordDate").val(),
                "procordDelyDate":$("#procordDelyDate").val()
            },//这个是把datatable的一些基本数据传给后台,比如起始位置,每页显示的行数
            type : 'post',
            dataType : 'json',
            async : false,
            success : function(result) {
                fnCallback(result);//把返回的数据传给这个方法就可以了,datatable会自动绑定数据的
            },
            error : function(msg) {
                alert(msg);
            }
        });
    }
    function searchProcord() {
        dataTableProcord.ajax.reload();
    }
    function resetProcord() {
        $("#procordBatch").val("");
        $("#procordDate").val("");
        $("#procordDelyDate").val("");
        $("#procordNo").val("");
        $("#procordSupplier").val("");
        dataTable.ajax.reload();
    }
    function downloadProcord() {
        $("#procordBatch").val("");
        $("#procordDate").val("");
        $("#procordDelyDate").val("");
        $("#procordNo").val("");
        $("#procordSupplier").val("");
        dataTable.ajax.reload();
    }

function initTable() {


	
	$('#stonelistBySupplier').DataTable({ 
    	"paginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
      //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力  
      "deferRender": true, 
     
      'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
      "bFilter" : false,// 搜索栏 
      "bLengthChange": false, //开关，是否显示每页大小的下拉框
      "bServerSide": true,//这个用来指明是通过服务端来取数据
      "sAjaxSource": "/b/getSupplierStoneTableData",//这个是请求的地址，Rest API or JSP的action
	  "fnServerData":retrieveSupplierStoneData,// 获取数据的处理函数
 	  "oLanguage": {  
 		"sLengthMenu": "每页显示 _MENU_ 条记录",  
 		"sZeroRecords": "抱歉， 没有找到",  
 		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
 		"sInfoEmpty": "没有数据",  
 		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",  
 		"sSearch": "搜索",
 		"oPaginate": {  
     		"sFirst": "首页",  
     		"sPrevious": "前一页",  
     		"sNext": "后一页",  
     		"sLast": "尾页"  
 		},  
 		"sZeroRecords": "没有检索到数据",  
 	  },
       "columns": [
	      { "data": "id" },
	      { "data": "supplier_purchdate",
	    	  render: function(data, type, row, meta) {
                  // 时间格式化
                  return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
              }  
	      },
	      { "data": "supplier_name"},
	      { "data": "supplier_procorNo" },
	      { "data": "supplier_mainStoneNo" },
	      { "data": "supplier_mainNumber",
	    	  render: function(data, type, row, meta) {
                  if(data > 0) {
                	  return data;
                  }else {
                	  return "";
                  }
              }   
	      },
	      
	      { "data": "supplier_mainWeight",
	    	  render: function(data, type, row, meta) {
                  if(data > 0) {
                	  return data;
                  }else {
                	  return "";
                  }
              }    
	      },
	      { "data": "supplier_subStoneNo"},
	      { "data": "supplier_subNumber",
	    	  render: function(data, type, row, meta) {
                  if(data > 0) {
                	  return data;
                  }else {
                	  return "";
                  }
              }    
	      },
	     { "data": "supplier_subWeight",
	    	  render: function(data, type, row, meta) {
                  if(data > 0) {
                	  return data;
                  }else {
                	  return "";
                  }
              }    
	      },
	      { "data": "supplier_delyman" },
	      { "data": "supplier_preparer" },
	      { "data": "supplier_porter" },
	      { "data": "id",
	    	  "render":function(data,type,full,row)
	            {    	            
					return '<button class="btn_edit" value="'+data+'" onclick="findStoneByStoneIDAJAXShow(this);">查看详情</button>';
	            } 
	      },
	      ],

	} );

	
}

$(document).ready(function() {
	
	document.getElementById("stone_purchdate").value = format(new Date());
	// $('#purchDateStart').editableSelect({ effects: 'slide' });//可输入的选择框
	// $('#purchDateEnd').editableSelect({ effects: 'slide' });//可输入的选择框
	// $('#mainNo').editableSelect({ effects: 'slide' });//可输入的选择框
	// $('#substoNo').editableSelect({ effects: 'slide' });//可输入的选择框
	   //$('#supplierName').editableSelect({ effects: 'slide' });//可输入的选择框
	   initTable(); 
	$('#exampletable').DataTable({ 
   	 "paginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
     //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力  
     "deferRender": true, 
     'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
     "bFilter" : false,// 搜索栏 
     "bLengthChange": false, //开关，是否显示每页大小的下拉框
	"oLanguage": {  
		"sLengthMenu": "每页显示 _MENU_ 条记录",  
		"sZeroRecords": "抱歉， 没有找到",  
		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
		"sInfoEmpty": "没有数据",  
		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",  
		"sSearch": "搜索",
		"oPaginate": {  
    		"sFirst": "首页",  
    		"sPrevious": "前一页",  
    		"sNext": "后一页",  
    		"sLast": "尾页"  
		},  
		"sZeroRecords": "没有检索到数据",  
		"sProcessing": "<img src='./loading.gif' />"  
	 }  
	 } );
	  $('#xuanshiForSearch').DataTable({ 
		   	 "paginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
		     //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力  
		     "deferRender": true, 
		     'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
		     "bFilter" : false,// 搜索栏 
		     "bLengthChange": false, //开关，是否显示每页大小的下拉框
			"oLanguage": {  
				"sLengthMenu": "每页显示 _MENU_ 条记录",  
				"sZeroRecords": "抱歉， 没有找到",  
				"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
				"sInfoEmpty": "没有数据",  
				"sInfoFiltered": "(从 _MAX_ 条数据中检索)",  
				"sSearch": "搜索",
				"oPaginate": {  
		    		"sFirst": "首页",  
		    		"sPrevious": "前一页",  
		    		"sNext": "后一页",  
		    		"sLast": "尾页"  
				},  
				"sZeroRecords": "没有检索到数据",  
				"sProcessing": "<img src='./loading.gif' />"  
			}  
		} );
	   $('#manage_search_table').DataTable({ 
		   	 "paginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
		     //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力  
		     "deferRender": true, 
		     'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
		     "bFilter" : false,// 搜索栏 
		     "bLengthChange": false, //开关，是否显示每页大小的下拉框
			"oLanguage": {  
				"sLengthMenu": "每页显示 _MENU_ 条记录",  
				"sZeroRecords": "抱歉， 没有找到",  
				"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
				"sInfoEmpty": "没有数据",  
				"sInfoFiltered": "(从 _MAX_ 条数据中检索)",  
				"sSearch": "搜索",
				"oPaginate": {  
		    		"sFirst": "首页",  
		    		"sPrevious": "前一页",  
		    		"sNext": "后一页",  
		    		"sLast": "尾页"  
				},  
				"sZeroRecords": "没有检索到数据",  
				"sProcessing": "<img src='./loading.gif' />"  
				}  
			} );
	$('#exampleorderout').DataTable({ 
		"bFilter" : false,// 搜索栏 
        "bLengthChange": false, //开关，是否显示每页大小的下拉框
	   	 "bProcessing": false, //打开数据加载时的等待效果  
	   	 'bStateSave': false,//配置好这个,刷新页面会让页面停留在之前的页码
	   	 "bServerSide": true,//这个用来指明是通过服务端来取数据
	     "sAjaxSource": "/b/getProcordTableData",//这个是请求的地址，Rest API or JSP的action
	   	 "fnServerData":retrieveProcordData,// 获取数据的处理函数
	   	 "oLanguage": {  
	    		"sLengthMenu": "每页显示 _MENU_ 条记录",  
	    		"sZeroRecords": "抱歉， 没有找到",  
	    		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
	    		"sInfoEmpty": "没有数据",  
	    		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
	    		"sProcessing" : "正在加载中...", 
	    		"sSearch": "搜索",
	    		"oPaginate": {  
		    		"sFirst": "首页",  
		    		"sPrevious": "前一页",  
		    		"sNext": "后一页",  
		    		"sLast": "尾页"  
	    		},  
	    		"sZeroRecords": "没有检索到数据",  
	    		"sProcessing": "<img src='./loading.gif' />"  
	    	},
	
	   	 "columns": [
	   	      { "data": "procord_ID" },
	   	      { "data": "procord_no" },
	   	      { "data": "procord_supplier" },
	   	      { "data": "procord_batch" },
	   	      { "data": "procord_date",
	   	    	  render: function(data, type, row, meta) {
	                     //先讲 时间格式化
	                     return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
	                 }  
	   	      },
	   	      { "data": "procord_delydate",
	   	    	  render: function(data, type, row, meta) {
	                     //先讲 时间格式化
	                     return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
	                 }  
	   	      },
	   	      { "data": "procord_goodscount"},
	   	   	  { "data": "procord_weight"},
	   	      { "data": "procord_pay" },
	   	      { "data": "procord_delyman" },
	   	   	  { "data": "procord_preparer" },
	   	  	  { "data": "procord_porter" },
	   	      { "data": "procord_no",
	   	    	  "render":function(data,type,full,row)
	   	            {    	           
	   	            	return  '<button class="btn_edit" value="'+data+'" onclick="editProcord(this);">编辑</button>';
	   	            } 
	   	      },
	   	      ],
	   
	   } );
	
    $('#listAllStone').DataTable({ 
    	"bFilter" : false,// 搜索栏 
        "bLengthChange": false, //开关，是否显示每页大小的下拉框
	   	 "bProcessing": false, //打开数据加载时的等待效果  
	   	 'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
	   	 "bServerSide": true,//这个用来指明是通过服务端来取数据
	        "sAjaxSource": "/b/getTableData",//这个是请求的地址，Rest API or JSP的action
	   	 "fnServerData":retrieveData,// 获取数据的处理函数
	   	 "oLanguage": {  
	    		"sLengthMenu": "每页显示 _MENU_ 条记录",  
	    		"sZeroRecords": "抱歉， 没有找到",  
	    		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
	    		"sInfoEmpty": "没有数据",  
	    		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
	    		"sProcessing" : "正在加载中...", 
	    		"sSearch": "搜索",
	    		"oPaginate": {  
		    		"sFirst": "首页",  
		    		"sPrevious": "前一页",  
		    		"sNext": "后一页",  
		    		"sLast": "尾页"  
	    		},  
	    		"sZeroRecords": "没有检索到数据",  
	    		"sProcessing": "<img src='img/loading.gif' />"
	    		},
	
	   	 "columns": [
	   	      { "data": "stone_seqno" },
	   	      { "data": "stone_purchdate",
	   	    	  render: function(data, type, row, meta) {
	                     //先讲 时间格式化
	                     return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
	                 }  
	   	      },
	   	      { "data": "stone_loosdofty"},
	   	      { "data": "stone_mainName" },
	   	      { "data": "stone_mainStoneNo" },
	   	      { "data": "stone_mainWeight",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }   
	   	      },
	   	      { "data": "stone_mainNumber",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_substoNo"},
	   	      { "data": "stone_substoName" },
	   	      { "data": "stone_substoWgt",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_substoNumber",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_preparer" },
	   	      { "data": "stone_porter" },
	   	      { "data": "stone_comments" },
	   	      { "data": "stone_channelNo" },
	   	      { "data": "stone_ID",
	   	    	  "render":function(data,type,full,row)
	   	            {    	           
	   	            	return  '<button class="btn_edit" value="'+data+'" onclick="findStoneByStoneIDAJAX(this);">查看详情</button>';;
	   	            } 
	   	      },
	   	      ],
	   
	   } );
    $('#tbackStoneshowListShow').DataTable({
   	 "paginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
        //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力  
        "deferRender": true, 
        'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
        "bFilter" : false,// 搜索栏 
        "bLengthChange": false, //开关，是否显示每页大小的下拉框
   	"oLanguage": {  
   		"sLengthMenu": "每页显示 _MENU_ 条记录",  
   		"sZeroRecords": "抱歉， 没有找到",  
   		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
   		"sInfoEmpty": "没有数据",  
   		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",  
   		"sSearch": "搜索",
   		"oPaginate": {  
	    		"sFirst": "首页",  
	    		"sPrevious": "前一页",  
	    		"sNext": "后一页",  
	    		"sLast": "尾页"  
   		},  
   		"sZeroRecords": "没有检索到数据",  
   		"sProcessing": "<img src='img/loading.gif' />"
   		}  
   		} );
    $('#listAllStoneCopy').DataTable({ 
    	"bFilter" : false,// 搜索栏 
        "bLengthChange": false, //开关，是否显示每页大小的下拉框
	   	 "bProcessing": false, //打开数据加载时的等待效果  
	   	 'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
	   	 "bServerSide": true,//这个用来指明是通过服务端来取数据
	        "sAjaxSource": "/b/getTableDataCopy",//这个是请求的地址，Rest API or JSP的action
	   	 "fnServerData":retrieveData,// 获取数据的处理函数
	   	 "oLanguage": {  
	    		"sLengthMenu": "每页显示 _MENU_ 条记录",  
	    		"sZeroRecords": "抱歉， 没有找到",  
	    		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
	    		"sInfoEmpty": "没有数据",  
	    		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
	    		"sProcessing" : "正在加载中...", 
	    		"sSearch": "搜索",
	    		"oPaginate": {  
		    		"sFirst": "首页",  
		    		"sPrevious": "前一页",  
		    		"sNext": "后一页",  
		    		"sLast": "尾页"  
	    		},  
	    		"sZeroRecords": "没有检索到数据",  
	    		"sProcessing": "<img src='img/loading.gif' />"
	    		},
	
	   	 "columns": [
	   	      { "data": "stone_seqno" },
	   	      { "data": "stone_purchdate",
	   	    	  render: function(data, type, row, meta) {
	                     //先讲 时间格式化
	                     return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
	                 }  
	   	      },
	   	      { "data": "stone_loosdofty"},
	   	      { "data": "stone_mainName" },
	   	      { "data": "stone_mainStoneNo" },
	   	      { "data": "stone_mainWeight",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }   
	   	      },
	   	      
	   	      { "data": "stone_substoNo"},
	   	      { "data": "stone_substoName" },
	   	      { "data": "stone_substoWgt",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_preparer" },
	   	      { "data": "stone_porter" },
	   	      { "data": "stone_comments" },
	   	      { "data": "stone_channelNo" },
	   	      { "data": "stone_ID",
	   	    	  "render":function(data,type,full,row)
	   	            {    	            
	   	            	return  '<button class="btn_edit" value="'+data+'" onclick="findStoneCopyByStoneIDAJAX(this);">查看详情</button>|<button class="btn_delete" value="'+data+'" onclick="deleteStoneCopyByStoneIDAJAX(this);">删除</button>';
	  
	   	            } 
	   	      },
	   	      ],
	     
	   } );
    
    $('#exampletableshowList').DataTable({ 
    	 "bFilter" : false,// 搜索栏 
         "bLengthChange": false, //开关，是否显示每页大小的下拉框
    	 "bProcessing": false, //打开数据加载时的等待效果  
    	 'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
    	 "bServerSide": true,//这个用来指明是通过服务端来取数据
         "sAjaxSource": "/b/getTableData",//这个是请求的地址，Rest API or JSP的action
    	 "fnServerData":retrieveData,// 获取数据的处理函数
    	 "oLanguage": {  
     		"sLengthMenu": "每页显示 _MENU_ 条记录",  
     		"sZeroRecords": "抱歉， 没有找到",  
     		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
     		"sInfoEmpty": "没有数据",  
     		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
     		"sProcessing" : "正在加载中...", 
     		"sSearch": "搜索",
     		"oPaginate": {  
 	    		"sFirst": "首页",  
 	    		"sPrevious": "前一页",  
 	    		"sNext": "后一页",  
 	    		"sLast": "尾页"  
     		},  
     		"sZeroRecords": "没有检索到数据",  
     		"sProcessing": "<img src='img/loading.gif' />"
     		},

    	 "columns": [
    	      { "data": "stone_seqno" },
    	      { "data": "stone_purchdate",
    	    	  render: function(data, type, row, meta) {
                      //先讲 时间格式化
                      return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
                  }  
    	      },
    	      { "data": "stone_loosdofty"},
    	      { "data": "stone_mainName" },
    	      { "data": "stone_mainStoneNo" },
    	      { "data": "stone_mainWeight",
    	    	  render: function(data, type, row, meta) {
                      if(data > 0) {
                    	  return data;
                      }else {
                    	  return "";
                      }
                  }   
    	      },
    	      { "data": "stone_mainNumber",
    	    	  render: function(data, type, row, meta) {
                      if(data > 0) {
                    	  return data;
                      }else {
                    	  return "";
                      }
                  }    
    	      },
    	      { "data": "stone_substoNo"},
    	      { "data": "stone_substoName" },
    	      { "data": "stone_substoWgt",
    	    	  render: function(data, type, row, meta) {
                      if(data > 0) {
                    	  return data;
                      }else {
                    	  return "";
                      }
                  }    
    	      },
    	      { "data": "stone_substoNumber",
    	    	  render: function(data, type, row, meta) {
                      if(data > 0) {
                    	  return data;
                      }else {
                    	  return "";
                      }
                  }    
    	      },
    	      { "data": "stone_preparer" },
    	      { "data": "stone_porter" },
    	      { "data": "stone_comments" },
    	      { "data": "stone_channelNo" },
    	      { "data": "stone_ID",
    	    	  "render":function(data,type,full,row)
    	            {    	            
    	            	return  '<form action="/b/deleteStoneByStoneIDAJAX" method="post" onsubmit="return deleteStoneByStoneIDAJAX();"><input type="button" class="btn_edit" id="b3@'+data+'" onclick="findStoneByStoneIDAJAXEdit(this);" value="编辑">|  <input type="hidden" value="'+data+'" name="delete_ID"><input type="submit" value="退石" class="btn_delete"></form>'
    	            } 
    	      },
    	      ],
    
    } );
    
    
    $('#examplexuanshi').DataTable({ 
    	"bFilter" : false,// 搜索栏 
        "bLengthChange": false, //开关，是否显示每页大小的下拉框
	   	 "bProcessing": false, //打开数据加载时的等待效果  
	   	 'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
	   	 "bServerSide": true,//这个用来指明是通过服务端来取数据
	      "sAjaxSource": "/b/getTableData",//这个是请求的地址，Rest API or JSP的action
	   	 "fnServerData":retrieveData,// 获取数据的处理函数
	   	 "oLanguage": {  
	    		"sLengthMenu": "每页显示 _MENU_ 条记录",  
	    		"sZeroRecords": "抱歉， 没有找到",  
	    		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
	    		"sInfoEmpty": "没有数据",  
	    		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
	    		"sProcessing" : "正在加载中...", 
	    		"sSearch": "搜索",
	    		"oPaginate": {  
		    		"sFirst": "首页",  
		    		"sPrevious": "前一页",  
		    		"sNext": "后一页",  
		    		"sLast": "尾页"  
	    		},  
	    		"sZeroRecords": "没有检索到数据",  
	    		"sProcessing": "<img src='img/loading.gif' />"
	    		},
	
	   	 "columns": [
	   	      { "data": "stone_purchdate",
	   	    	  render: function(data, type, row, meta) {
	                     //先讲 时间格式化
	                     return (new Date(data)).Format("yyyy-MM-dd"); //date的格式 Thu Apr 26 2016 00:00:00 GMT+0800
	                 }  
	   	      },
	   	      { "data": "stone_mainStoneNo" },
	   	      { "data": "stone_mainWeight",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }   
	   	      },
	   	      { "data": "stone_mainNumber",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_substoNo"},
	   	      { "data": "stone_substoWgt",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_substoNumber",
	   	    	  render: function(data, type, row, meta) {
	                     if(data > 0) {
	                   	  return data;
	                     }else {
	                   	  return "";
	                     }
	                 }    
	   	      },
	   	      { "data": "stone_ID",
	   	    	  "render":function(data,type,full,row)
	   	            {    	           
	   	            	return  '<button  value="'+data+'" onclick="findStoneByStoneIDAJAXShow(this);" >查看详情</button>| <button   name="but"  value="'+data+'" onclick="chooseStone(this);">选择</button>';
	   	            } 
	   	      },
	   	      ],
	   
	   } );
    $('#stonelistBySearch').DataTable({ 
      	 "paginationType" : "full_numbers", //详细分页组，可以支持直接跳转到某页  
        //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力  
        "deferRender": true, 
        'bStateSave': true,//配置好这个,刷新页面会让页面停留在之前的页码
        "bFilter" : false,// 搜索栏 
        "bLengthChange": false, //开关，是否显示每页大小的下拉框
   	  "oLanguage": {  
   		"sLengthMenu": "每页显示 _MENU_ 条记录",  
   		"sZeroRecords": "抱歉， 没有找到",  
   		"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",  
   		"sInfoEmpty": "没有数据",  
   		"sInfoFiltered": "(从 _MAX_ 条数据中检索)",  
   		"sSearch": "搜索",
   		"oPaginate": {  
       		"sFirst": "首页",  
       		"sPrevious": "前一页",  
       		"sNext": "后一页",  
       		"sLast": "尾页"  
   		},  
   		"sZeroRecords": "没有检索到数据",  
   		"sProcessing": "<img src='img/loading.gif' />"
   		}  
   	} );
} );  
function all_delete() {
	 var msg = "您真的确定要全部删除吗？"; 
	 if (confirm(msg)==true){ 
		 $.ajax({
			 url:"/b/deleteAllData",
			 type:"post",	
		 	dateType:"json",
		 	success:function(result) {
		 		alert(result);
		 		location.reload();
		 	}
		}); 
	  return true; 
	 }else{ 
	  return false; 
	 } 	
}  


</script>



</body>
</html>