<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0" />
<link rel="stylesheet" href="/css/styleAnalysis.css" media="screen" />
<script src="/js/jquery-1.7.2.min.js"></script>
<script src="/js/echarts.js"></script>
<script type="text/javascript" src="/js/plugins/layer/laydate/laydate.js"></script>
<link href="/css/bootstrap.min.css" rel="stylesheet" />
<link href="/css/laydate.css" rel="stylesheet" />
<link href="/css/bootstrap-theme.min.css" rel="stylesheet" />
<link href="/css/jquery-editable-select.min.css" rel="stylesheet" />
<link th:href="@{/css/loading.css}" rel="stylesheet"/>
<title>销售结构分析模型</title>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

.mian-div {
	width: 100%;
	margin: 0 auto;
	height: 100%;
}

.top-div {
	width: 95%;
	margin: 0 auto;
	height: 6%;
}


.left-div {
	width: 20%;
	height: 94%;
	float: left;
	text-align: center;
}

.left-div-inner {
	width: 80%;
	margin: 0 auto;
}

select {
	display: block;
	margin: 1rem auto;
	width: 100%;
	height: 2rem;
	background-color: green;
	color: white;
	border-radius: 0.5rem;
}

.selector {
	margin: 0 auto;
	text-align: left;
}

.style-selector {
	display: inline-block;
	width: 100%;
}

.btn {
	width: 60%;
	margin: 1rem auto;
	line-height: 2rem;
	height: 3rem;
	color: white;
	border-radius: 0.5rem;
}

.blue {
	background-color: rgb(36, 135, 207);
}

.red {
	background-color: rgb(230, 80, 70);
}

.right-div {
	width: 80%;
	height: 94%;
	float: right;
}

.right-inner {
	height: 500px;
}

.right-inner-top {
	height: 70%;
}

.right-inner-down {
	height: 50%;
}

table {
	border-collapse: collapse;
	margin: 1rem auto;
}

.displayNone {
	display: none;
}
</style>
</head>

<body>
 <!-- 遮罩层 开始-->
 <div id="loading" style="display:none;">
    <img src="/img/loading.gif" alt="正在加载中，请耐心等待" >
    <span >正在加载中，请耐心等待</span>
</div>
<!-- 遮罩层结束 -->
	<!-- header -->
	<header>
		<div class="row-3">

			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<span class="button-border">
				<a class="button-red" href="/analysis/main">返回主菜单</a>
			</span>

			<div class="slogan-index">月销售数据统计</div>

		</div>
	</header>
	<!-- end header -->
	<div id="listCounterDate" th:text="${listCounterDate}" class="displayNone"></div>
	<div id="listCounterDateCount" th:text="${listCounterDateCount}" class="displayNone"></div>
	<div class="mian-div">
	
		<div class="left-div">
			<div class="left-div-inner">
				<div class="selector">
					<div class="style-selector" >
						<br>
						<p>请选择比较年份：</p>
						<select id="selectTimeStart" class="form-control"   style="background-color: green; color: black;">
						    <option  selected="selected" value="2017-01-01">2017</option>
							<option   value="2018-01-01">2018</option>
							<option   value="2019-01-01">2019</option>
							<option   value="2020-01-01">2020</option>
							<option   value="2021-01-01">2021</option>
							<option   value="2022-01-01">2022</option>
							<option   value="2023-01-01">2023</option>
							<option   value="2024-01-01">2024</option>
							<option   value="2025-01-01">2025</option>
							<option   value="2026-01-01">2026</option>
							<option   value="2027-01-01">2027</option>
							<option   value="2028-01-01">2028</option>
							<option   value="2029-01-01">2029</option>
							<option   value="2030-01-01">2030</option>
							<option   value="2031-01-01">2031</option>
							<option   value="2032-01-01">2032</option>
							<option   value="2033-01-01">2033</option>
							<option   value="2034-01-01">2034</option>
							<option   value="2035-01-01">2035</option>
							<option   value="2036-01-01">2036</option>
							<option   value="2037-01-01">2037</option>
							<option   value="2038-01-01">2038</option>
							<option   value="2039-01-01">2039</option>
							<option   value="2040-01-01">2040</option>
							<option   value="2041-01-01">2041</option>
							<option   value="2042-01-01">2042</option>
						</select>
						<select id="selectTimeEnd" class="form-control"   style="background-color: green; color: black;">
						    <option  selected="selected" value="2017-12-31">2017</option>
							<option   value="2018-12-31">2018</option>
							<option   value="2019-12-31">2019</option>
							<option   value="2020-12-31">2020</option>
							<option   value="2021-12-31">2021</option>
							<option   value="2022-12-31">2022</option>
							<option   value="2023-12-31">2023</option>
							<option   value="2024-12-31">2024</option>
							<option   value="2025-12-31">2025</option>
							<option   value="2026-12-31">2026</option>
							<option   value="2027-12-31">2027</option>
							<option   value="2028-12-31">2028</option>
							<option   value="2029-12-31">2029</option>
							<option   value="2030-12-31">2030</option>
							<option   value="2031-12-31">2031</option>
							<option   value="2032-12-31">2032</option>
							<option   value="2033-12-31">2033</option>
							<option   value="2034-12-31">2034</option>
							<option   value="2035-12-31">2035</option>
							<option   value="2036-12-31">2036</option>
							<option   value="2037-12-31">2037</option>
							<option   value="2038-12-31">2038</option>
							<option   value="2039-12-31">2039</option>
							<option   value="2040-12-31">2040</option>
							<option   value="2041-12-31">2041</option>
							<option   value="2042-12-31">2042</option>
						</select>
					</div>
				</div>
				<br> 
				<select id="listCounter" class="form-control"  name="stone_CounterName" style="background-color: green; color: black;">
					<option disabled="disabled" selected="selected" >柜台</option>
					<option value="所有" >所有</option>
					<option th:each="n : ${listCounter}" th:value="${n.counter}" th:text="${n.counter}" style="background-color: lightgreen; color: black; text-align: left;"></option>
				</select>
				<select id="listProduct" class="form-control"  name="stone_CounterName" style="background-color: green; color: black;">
					<option disabled="disabled" selected="selected" >名称</option>
					<option value="所有" >所有</option>
					<option th:each="n : ${listProduct}" th:value="${n.product}" th:text="${n.product}" style="background-color: lightgreen; color: black; text-align: left;"></option>
				</select>
				<br>
				<div>
					    <input type="radio" name="selectTpye" value="数量" checked>
						数量
						<input type="radio" value="标价" name="selectTpye">
						标价
						<input type="radio" value="结算价" name="selectTpye">
						结算价
						<input type="radio" value="金重" name="selectTpye">
						金重
						<input type="radio" value="主石" name="selectTpye">
						主石
				</div>
			
				<div class="btn blue" onclick="javascript:button_post();">提交</div>
				<div class="btn red" onclick="javascript:rest();">重置</div>
				<div >
					<form action="/analysis/downloadGraphExcelForS752" method="post" onsubmit="return checkForm1();">
						<input type="hidden"  value="" name="context" id="conGraph"/>
						<input type="submit" class = " btn red" value="导出图表数据">
					</form>
				</div>
			</div>
		</div>
		<div class="right-div">
			<div class="right-inner">
				<div class="right-inner-top">
					<div id="container" style="height: 700px;; width: 100%;"></div>
				</div>
				
			</div>
		</div>
	</div>

	<script src="/js/jquery-1.12.4.js" type="text/javascript"></script>
	<script src="/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="/js/jquery.min.js" type="text/javascript"></script>
	<script src="/js/jquery-editable-select.min.js" type="text/javascript"></script>

	<script type="text/javascript" th:inline="javascript">
		//alert([[${stoneList}]]);
		tt();
		function tt() {
			var dom = document.getElementById("container");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			app.title = '多 X 轴示例';

			var colors = ['#5793f3', '#d14a61', '#675bba'];


			option = {
			    color: colors,
			    
			    tooltip: {
			        trigger: 'none',
			        axisPointer: {
			            type: 'cross'
			        }
			    },
			    legend: {
			        data:['黄金量', '铂金量']
			    },
			    grid: {
			        top: 70,
			        bottom: 50
			    },
			    xAxis: [
			        {
			            type: 'category',
			            axisTick: {
			                alignWithLabel: true
			            },
			            axisLine: {
			                onZero: false,
			                lineStyle: {
			                    color: colors[1]
			                }
			            },
			            axisPointer: {
			                label: {
			                    formatter: function (params) {
			                        return '黄金量  ' + params.value
			                            + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
			                    }
			                }
			            },
			            data: ["2016-1", "2016-2", "2016-3", "2016-4", "2016-5", "2016-6", "2016-7", "2016-8", "2016-9", "2016-10", "2016-11", "2016-12"]
			        },
			        {
			            type: 'category',
			            axisTick: {
			                alignWithLabel: true
			            },
			            axisLine: {
			                onZero: false,
			                lineStyle: {
			                    color: colors[0]
			                }
			            },
			            axisPointer: {
			                label: {
			                    formatter: function (params) {
			                        return '铂金量  ' + params.value
			                            + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
			                    }
			                }
			            },
			            data: ["2015-1", "2015-2", "2015-3", "2015-4", "2015-5", "2015-6", "2015-7", "2015-8", "2015-9", "2015-10", "2015-11", "2015-12"]
			        }
			    ],
			    yAxis: [
			        {
			            type: 'value'
			        }
			    ],
			    series: [
			        {
			            name:'2015 黄金量',
			            type:'line',
			            xAxisIndex: 1,
			            smooth: true,
			            data: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3]
			        },
			        {
			            name:'2016 铂金量',
			            type:'line',
			            smooth: true,
			            data: [3.9, 5.9, 11.1, 18.7, 48.3, 69.2, 231.6, 46.6, 55.4, 18.4, 10.3, 0.7]
			        }
			    ]
			};
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
		function button_post(){
			var counter = document.getElementById("listCounter").value;
			var product = document.getElementById("listProduct").value;
			var selectTimeStart = document.getElementById("selectTimeStart").value;
			var selectTimeEnd = document.getElementById("selectTimeEnd").value;
			var selectType =$('input:radio:checked').val();
			$('#loading').show();
			$.ajax({
				url : "/analysis/compareCounterInTwoYearOfIndex9",
				type : "post",
				data : {
					counter : counter,
					product : product,
					selectTimeStart : selectTimeStart,
					selectTimeEnd : selectTimeEnd,
					selectType : selectType,
				},
				dateType : "json",
				success : function(result) {
					$('#loading').hide();
					//alert(result);
					var res = result.split("@");
					res0 = res[0].substring(1, res[0].length-1).split(",");
					res1 = res[1].substring(1, res[1].length-1).split(",");
					res2 = res[2].substring(1, res[2].length-1).split(",");
					res3 = res[3].substring(1, res[3].length-1).split(",");
					var list0=[];//选择年
					var list1=[];//对比年
					var list2=[];//选择年数
					var list3=[];//对比年数
					//填充下载图表数据
					var conGraph ="";
					for(var i=0;i<res0.length;i++) {
						conGraph = conGraph +res0[i]+"&"+res1[i]+"&"+res2[i]+"&"+res3[i]+"&";
					}
					document.getElementById("conGraph").value=conGraph;
					for(var i=0;i<res0.length;i++) {
						list0.push(res0[i]);
					}
					for(var i=0;i<res1.length;i++) {
						list1.push(res1[i]);
					}
					
					for(var i=0;i<res2.length;i++) {
						list2.push(res2[i]);
					}
					
					for(var i=0;i<res3.length;i++) {
						list3.push(res3[i]);
					}
					
					
					
					
					
					var dom = document.getElementById("container");
					var myChart = echarts.init(dom);
					var app = {};
					option = null;
					app.title = '多 X 轴示例';

					var colors = ['#5793f3', '#d14a61', '#675bba'];


					option = {
					    color: colors,

					    tooltip: {
					        trigger: 'none',
					        axisPointer: {
					            type: 'cross'
					        }
					    },
					    legend: {
					        data:['销量', '销量']
					    },
					    grid: {
					        top: 70,
					        bottom: 50
					    },
					    xAxis: [
					        {
					            type: 'category',
					            axisTick: {
					                alignWithLabel: true
					            },
					            axisLine: {
					                onZero: false,
					                lineStyle: {
					                    color: colors[1]
					                }
					            },
					            axisPointer: {
					                label: {
					                    formatter: function (params) {
					                        return '销量  ' + params.value
					                            + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
					                    }
					                }
					            },
					            data: list1
					        },
					        {
					            type: 'category',
					            axisTick: {
					                alignWithLabel: true
					            },
					            axisLine: {
					                onZero: false,
					                lineStyle: {
					                    color: colors[0]
					                }
					            },
					            axisPointer: {
					                label: {
					                    formatter: function (params) {
					                        return '销量  ' + params.value
					                            + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
					                    }
					                }
					            },
					            data: list0
					        }
					    ],
					    yAxis: [
					        {
					            type: 'value'
					        }
					    ],
					    series: [
					        {
					            name:'2015 销量',
					            type:'line',
					            xAxisIndex: 1,
					            smooth: true,
					            data: list2
					        },
					        {
					            name:'2016 销量',
					            type:'line',
					            smooth: true,
					            data: list3
					        }
					    ]
					};
					;
					if (option && typeof option === "object") {
					    myChart.setOption(option, true);
					}
					
				}
			});
		}

		
	</script>
	
</body>
</html>